(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"1OyB":function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,"a",(function(){return o}))},"6qfE":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("RSLW");Object.defineProperty(n,"MDXTag",{enumerable:!0,get:function(){return s(o).default}});var a=t("Fobl");function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"MDXProvider",{enumerable:!0,get:function(){return s(a).default}})},BPRX:function(e,n,t){"use strict";t.r(n),t.d(n,"meta",(function(){return h})),t.d(n,"default",(function(){return b}));var o=t("Ff2n"),a=t("1OyB"),s=t("vuIU"),r=t("Ji7U"),i=t("md7G"),c=t("foSv"),p=t("q1tI"),m=t.n(p),d=t("6qfE"),u=t("qKvR");m.a.createElement;function l(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,o=Object(c.a)(e);if(n){var a=Object(c.a)(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return Object(i.a)(this,t)}}var h={title:"Tackling responsive elements in React",subtitle:"...and why I\u2019ve created React Sizes",author:"renatorib",tags:["javascript","react"],outdated:!0},b=function(e){Object(r.a)(i,e);var n=l(i);function i(e){var t;return Object(a.a)(this,i),(t=n.call(this,e)).layout=null,t}return Object(s.a)(i,[{key:"render",value:function(){var e=this.props,n=e.components;Object(o.a)(e,["components"]);return Object(u.d)(d.MDXTag,{name:"wrapper",components:n},Object(u.d)(d.MDXTag,{name:"h1",components:n},"Tackling responsive elements in React"),Object(u.d)(d.MDXTag,{name:"p",components:n},"In the \u201cperfect world of responsiveness\u201d you can do 90% of things only by adding percentage widths, using flexbox, adding media queries to change grid dimensions, etc. But in the real world, sometimes we need to use two or more completely different structures to adapt to devices."),Object(u.d)(d.MDXTag,{name:"p",components:n},"As a Frontend Engineer I often have to use different elements based on the user\u2019s viewport. By doing that over and over again I\u2019ve found good and bad ways to make this swapping of elements."),Object(u.d)(d.MDXTag,{name:"p",components:n},"In fact we can still do this with media queries. You can simply render all elements for all devices and swap those with media queries. Just set ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"display: none;")," in elements we want to hide on the target resolution. See example below:"),Object(u.d)(d.MDXTag,{name:"pre",components:n},Object(u.d)(d.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},'const MyComponent = () => (\n  <div>\n    <div className="hide-mobile">Desktop only</div>\n    <div className="hide-desktop">Mobile only</div>\n  </div>\n);\n')),Object(u.d)(d.MDXTag,{name:"pre",components:n},Object(u.d)(d.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-css{2,7}"}},".hide-mobile {\n  @media (max-width: 480px) {\n    display: none;\n  }\n}\n.hide-desktop {\n  @media not all and (max-width: 480px) {\n    display: none;\n  }\n}\n")),Object(u.d)(d.MDXTag,{name:"p",components:n},"It\u2019s a good way and sometimes can work, ",Object(u.d)(d.MDXTag,{name:"strong",components:n,parentName:"p"},"but"),"\u2026"),Object(u.d)(d.MDXTag,{name:"h2",components:n},"Why swapping elements with CSS might be a bad idea."),Object(u.d)(d.MDXTag,{name:"p",components:n},"Let\u2019s assume you want to build a desktop and a mobile version of a website section, and to do it you need to pass different props to carousel component. Ex.: in mobile our carousel component should receive ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"showItems={1}")," and in desktop, should receive ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"showItems={3}")),Object(u.d)(d.MDXTag,{name:"p",components:n},"You could (but shouldn\u2019t) render the desktop and mobile version of the carousel component with different props and show/hide them with media queries. It\u2019s an \u201cexpensive\u201d way though. You\u2019re rendering components in the DOM that won\u2019t be used for that device/media query. Depending on the component it can affect the performance of your application in render time, size, etc."),Object(u.d)(d.MDXTag,{name:"pre",components:n},Object(u.d)(d.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},'const MyComponent = ({ items }) => (\n  <div>\n    <div className="hide-mobile">\n      <SuperExpensiveCarousel showItems={3}>{items}</SuperExpensiveCarousel>\n    </div>\n\n    <div className="hide-desktop">\n      <SuperExpensiveCarousel showItems={1}>{items}</SuperExpensiveCarousel>\n    </div>\n  </div>\n);\n')),Object(u.d)(d.MDXTag,{name:"h2",components:n},"JavaScript to the rescue."),Object(u.d)(d.MDXTag,{name:"p",components:n},"To avoid rendering components that won\u2019t be used you can use JS to decide which component should be rendered, avoiding the unnecessary render. This way you move the \u201cresponsive logic\u201d to JS and get the other benefits JS has to offer, such as better support for calculations and keep the \u201cshould this component render\u201d logic in the component declaration."),Object(u.d)(d.MDXTag,{name:"p",components:n},"In a nutshell, you have more control and flexibility. You have great powers."),Object(u.d)(d.MDXTag,{name:"pre",components:n},Object(u.d)(d.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},"const MyComponent = ({ items }) => {\n  const isMobile = window.innerWidth < 480;\n  const showItems = isMobile ? 1 : 3;\n\n  return (\n    <SuperExpensiveCarousel showItems={showItems}>\n      {items}\n    </SuperExpensiveCarousel>\n  );\n};\n")),Object(u.d)(d.MDXTag,{name:"p",components:n},"You can easily have access to user\u2019s width and height with ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"window.innerWidth")," and ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"window.innerHeight"),".\nAlso you might want (and you will want) to know if the user resize the page to recalculate ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"window.innerWidth")," again.\nAdding a resize listener to window may help you to deal with that:"),Object(u.d)(d.MDXTag,{name:"pre",components:n},Object(u.d)(d.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},'class MyComponent extends React.Component {\n  state = {\n    isMobile: false\n  };\n\n  handleWindowResize = () => {\n    this.setState({ isMobile: window.innerWidth < 480 });\n  };\n\n  componentDidMount() {\n    window.addEventListener("resize", this.onWindowResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener("resize", this.onWindowResize);\n  }\n\n  render() {\n    const { items } = this.props;\n    const { isMobile } = this.state;\n    const showItems = isMobile ? 1 : 3;\n\n    return (\n      <SuperExpensiveCarousel showItems={showItems}>\n        {items}\n      </SuperExpensiveCarousel>\n    );\n  }\n}\n')),Object(u.d)(d.MDXTag,{name:"h2",components:n},"Nice! But now the performance will haunt you."),Object(u.d)(d.MDXTag,{name:"p",components:n},"Remember, with great power comes great responsibility."),Object(u.d)(d.MDXTag,{name:"p",components:n},"Dealing with window resize callback can be dangerous, especially when you mess with props and/or state, that ",Object(u.d)(d.MDXTag,{name:"strong",components:n,parentName:"p"},"updates")," your component. If you don\u2019t treat the callback, it could provoke ",Object(u.d)(d.MDXTag,{name:"strong",components:n,parentName:"p"},"hundreds of unnecessary renders")," by a simple resize movement, and this is the most common mistake when someone try to do something like this."),Object(u.d)("img",{src:t("jUSg")}),Object(u.d)(d.MDXTag,{name:"h2",components:n},"Performance optimizations."),Object(u.d)(d.MDXTag,{name:"p",components:n},"If you want to prevent your component from exploding, you\u2019ll need to treat the callback with debounce or throttle."),Object(u.d)(d.MDXTag,{name:"blockquote",components:n},Object(u.d)(d.MDXTag,{name:"p",components:n,parentName:"blockquote"},"\u201c",Object(u.d)(d.MDXTag,{name:"strong",components:n,parentName:"p"},"Debounce")," and ",Object(u.d)(d.MDXTag,{name:"strong",components:n,parentName:"p"},"throttle")," are two similar (but different!) techniques to control how many times we allow a function to be executed over time.\nHaving a debounced or throttled version of our function is especially useful when we are attaching the function to a DOM event. Why? Because we are giving ourselves a layer of control between the event and the execution of the function ","[\u2026]","\u201d"),Object(u.d)(d.MDXTag,{name:"blockquote",components:n,parentName:"blockquote"},Object(u.d)(d.MDXTag,{name:"p",components:n,parentName:"blockquote"},"Read more about debounce and throttle in this ",Object(u.d)(d.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://css-tricks.com/debouncing-throttling-explained-examples/"}},"great article")," by css-tricks."))),Object(u.d)(d.MDXTag,{name:"p",components:n},"In the example below I\u2019ve treated ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"throttledHandleWindowResize")," with throttle of 200ms. Now the callback won\u2019t be called more than 5 times in one second (max of one execution for every 200ms/0.2seg)."),Object(u.d)(d.MDXTag,{name:"pre",components:n},Object(u.d)(d.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},'import throttle from "lodash.throttle";\n\nclass MyComponent extends React.Component {\n  state = {\n    isMobile: false\n  };\n\n  throttledHandleWindowResize = () => {\n    return throttle(() => {\n      this.setState({ isMobile: window.innerWidth < 480 });\n    }, 200);\n  };\n\n  componentDidMount() {\n    window.addEventListener("resize", this.throttledHandleWindowResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener("resize", this.throttledHandleWindowResize);\n  }\n\n  render() {\n    const { items } = this.props;\n    const { isMobile } = this.state;\n    const showItems = isMobile ? 1 : 3;\n\n    return (\n      <SuperExpensiveCarousel showItems={showItems}>\n        {items}\n      </SuperExpensiveCarousel>\n    );\n  }\n}\n')),Object(u.d)(d.MDXTag,{name:"h2",components:n},"Introducing React Sizes"),Object(u.d)(d.MDXTag,{name:"p",components:n},"Thinking in this approach, I\u2019ve wrote ",Object(u.d)(d.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"http://github.com/renatorib/react-sizes"}},"react-sizes"),", a high-order component that handle all this work. You just need to pass the variables you want, based on the width and height of the window, and these variables will passed by props to your component:"),Object(u.d)(d.MDXTag,{name:"pre",components:n},Object(u.d)(d.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},"import React from 'react';\nimport sizes from 'react-sizes';\n\nconst MyComponent = ({ showItems, items }) => (\n  <SuperExpensiveCarousel showItems={showItems}>\n    {items}\n  </SuperExpensiveCarousel>\n);\n\nconst mapSizesToProps = ({ width }) => ({\n  showItems: (width && width < 480) ? 1 : 3,\n});\n\nexport sizes(mapSizesToProps)(MyComponent);\n")),Object(u.d)(d.MDXTag,{name:"p",components:n},"As you can see, you just need to create a ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"mapSizesToProps")," function that receives a object with ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"width")," and ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"height"),"."),Object(u.d)(d.MDXTag,{name:"pre",components:n},Object(u.d)(d.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},"const mapSizesToProps = sizes => ({\n  width: sizes.width,\n  height: sizes.height\n});\n")),Object(u.d)(d.MDXTag,{name:"p",components:n},"To know more about the ",Object(u.d)(d.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"mapSizesToProps"),", you can read the ",Object(u.d)(d.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/renatorib/react-sizes#guide"}},"Guide"),". Also you can see more usage examples at ",Object(u.d)(d.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/renatorib/react-sizes#usage"}},"Usage")," section."),Object(u.d)(d.MDXTag,{name:"h2",components:n},"Conclusion"),Object(u.d)(d.MDXTag,{name:"p",components:n},"The best responsive solution is to always use media queries with a flexible layout, of course. But ",Object(u.d)(d.MDXTag,{name:"em",components:n,parentName:"p"},"sometimes")," the ideal world conflicts with real world and ",Object(u.d)(d.MDXTag,{name:"strong",components:n,parentName:"p"},"you will")," need to do something in javascript."),Object(u.d)(d.MDXTag,{name:"p",components:n},"Now, when this happens, you know: ",Object(u.d)(d.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/renatorib/react-sizes"}},"React Sizes will be your friend.")))}}]),i}(m.a.Component);b.isMDXComponent=!0},Fobl:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.withMDXComponents=void 0;var o,a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},s=t("q1tI"),r=(o=s)&&o.__esModule?o:{default:o};var i=r.default.createContext({}),c=i.Provider,p=i.Consumer;n.withMDXComponents=function(e){return function(n){return r.default.createElement(p,null,(function(t){return r.default.createElement(e,a({},n,{components:n.components||t}))}))}};n.default=function(e){return r.default.createElement(c,{value:e.components},e.children)}},Ji7U:function(e,n,t){"use strict";function o(e,n){return(o=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function a(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&o(e,n)}t.d(n,"a",(function(){return a}))},RSLW:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},s=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),r=t("q1tI"),i=(o=r)&&o.__esModule?o:{default:o},c=t("Fobl");function p(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function m(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}var d={inlineCode:"code",wrapper:"div"},u=function(e){function n(){return p(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),s(n,[{key:"render",value:function(){var e=this.props,n=e.name,t=e.parentName,o=e.props,s=void 0===o?{}:o,r=e.children,c=e.components,p=void 0===c?{}:c,m=e.Layout,u=e.layoutProps,l=p[t+"."+n]||p[n]||d[n]||n;return m?i.default.createElement(m,a({components:p},u),i.default.createElement(l,s,r)):i.default.createElement(l,s,r)}}]),n}(r.Component);n.default=(0,c.withMDXComponents)(u)},foSv:function(e,n,t){"use strict";function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.d(n,"a",(function(){return o}))},jUSg:function(e,n){e.exports="/_next/static/images/ops-3a546d8d3431ebb42c7fe59cd4d51ec0.gif"},md7G:function(e,n,t){"use strict";function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,n){return!n||"object"!==o(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}t.d(n,"a",(function(){return a}))},vuIU:function(e,n,t){"use strict";function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}t.d(n,"a",(function(){return a}))}}]);