<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, user-scalable=no"/><link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700|PT+Serif:400,400i,700" rel="stylesheet"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Demystifying interpreters</title><meta name="date" content="Fri, 02 Oct 2020 03:00:00 GMT"/><meta property="og:title" content="Demystifying interpreters"/><meta property="og:description" content="From zero to the basics. Learn together with me what is an interpreter and get out of the mystic"/><meta property="og:image" content="https://rena.to/_next/static/images/cover-08d5c95160fb4385b4586e13481e642a.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@renatorib_"/><meta name="twitter:creator" content="@renatorib_"/><meta name="twitter:title" content="Demystifying interpreters"/><meta name="twitter:description" content="From zero to the basics. Learn together with me what is an interpreter and get out of the mystic"/><meta name="twitter:image" content="https://rena.to/_next/static/images/cover-08d5c95160fb4385b4586e13481e642a.jpg"/><link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAAAAACPAi4CAAAB7UlEQVRYw+3XXZWzMBCA4XoYBaAgDnAwDlDQKKiDOEDBooAqiAMUEAVZBe93QfkJgS1nOXvOd9FctTnhoZPJDOUGXgv53dAWbji5MBy3Vi4Nf9NrgN6uXS/lVUA+wAf4C8AYVdW8vo/mZ6AJIYQQmUbs7FhsIYQQ5mmGVveBx2rRtLYWkeY7nzf7IaiLQF9XptIX50REtAF4amW0bgJArA72wAP+9fkeAcafO1si4gCieQ9IFYEhA+TOetUPwHgvzQDxAOUJwAA0OVAD2BOARKDLgQV+BwSgzwEB+DoL+CtA3AeqjXcIVAebaAHqE0ALUOVAdzKNZk5CCugmCUdAMQDBZIAZgFC8BXQAvivZAo+4uPtAcM41XxHAm1XevHOu6SLAs5AfgHl4TRI/j06PW5oHemut7fOT87TW2jhX+Js9uAOYBHBTgQ7lCWA5hClQblN4CDiARwaMh0tPAGVcN64FMORB7J+DB1Mtp+egAWhPABJW4a6AMgLcTwDK1a7sl3DXQBnOdmUT2e2JytmG8mDKZXpFQ5rL45bW8WopKTAGsTwgZ6CwAxDqYrNS7aa2xuB6kwL1Uop+anhV+sSejfv4vS3XQLteOd+rT4Q5DBNW+/D5l/YB/hOgvApcfvH014D2+ss3tL+NolAP/wBzeeFjAcyjTAAAAABJRU5ErkJggg=="/><meta name="next-head-count" content="14"/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-e47d938af6cc03fe7b7b.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9ec1f7868b3e9d138cdd.js" as="script"/><link rel="preload" href="/_next/static/chunks/05d954cf.9e3ba82d748380f7bd2c.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.1c635899381e3f4b2832.js" as="script"/><link rel="preload" href="/_next/static/chunks/c4b7dd1ea37cbe53e921af5fa95eb74e6ed8adf6.521f5e484ffbbd6cd108.js" as="script"/><link rel="preload" href="/_next/static/chunks/11cd88066fea60e4e9b66126e194a6cda56fa586.f24b4e8999210d024a49.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-e5cc290103d5c6ddc580.js" as="script"/><link rel="preload" href="/_next/static/chunks/d09f71c2771447e62661a7b2e7969c57ce47c1dd.51122af25badafa19040.js" as="script"/><link rel="preload" href="/_next/static/chunks/bfa37fcd0818edd0d3354ea585e5d4d4b3e87fa4.d6dd330130be845ce596.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-209fa607536f80ba4dd1.js" as="script"/><style data-emotion-css="15o30dr xc9yl4 rvz59j f2ibaw 16nde6r">.css-15o30dr{box-sizing:border-box;min-width:0;min-height:0;}.css-xc9yl4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;box-sizing:border-box;min-width:0;min-height:0;}.css-rvz59j{width:100%;max-width:820px;border-radius:5px;overflow:hidden;background:black;color:white;margin:2em auto;font-family:"Roboto","sans-serif";}.css-rvz59j .input{height:40px;background:#222;}.css-rvz59j .input input{width:100%;height:100%;background:none;border:none;color:#999;font-size:16px;text-align:center;}.css-rvz59j .box{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-rvz59j .box > *{margin-right:5px;}.css-rvz59j .box h3{width:100%;margin:0;padding:5px;font-size:9px;text-align:center;text-transform:uppercase;-webkit-letter-spacing:2px;-moz-letter-spacing:2px;-ms-letter-spacing:2px;letter-spacing:2px;color:#444;}.css-rvz59j .actions{width:25%;padding:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-rvz59j .actions button{border:none;border-radius:3px;cursor:pointer;margin:2px;padding:7px 15px;opacity:0.85;}.css-rvz59j .actions button:disabled{opacity:0.5;cursor:not-allowed;}.css-rvz59j .actions button:not(:disabled):hover{opacity:1;}.css-rvz59j .actions button.primary{background:#fff;color:black;}.css-rvz59j .actions button.secondary{border:2px solid #444;background:transparent;color:#999;}.css-rvz59j .actions button.secondary:hover{border-color:#777;}.css-rvz59j .canvas{width:75%;padding:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-rvz59j .canvas .pregroup{font-size:0px;}.css-rvz59j .canvas .pregroup pre{margin:0;display:inline-block;font-size:18px;font-family:monospace;}.css-rvz59j .canvas .pregroup pre.past{opacity:0.2;-webkit-text-decoration:line-through;text-decoration:line-through;}.css-rvz59j .canvas .pregroup pre.current{color:lime;-webkit-text-decoration:underline;text-decoration:underline;}.css-rvz59j .canvas .pregroup pre.pointer{padding:3px 7px;-webkit-transform:translateX(-50%) translateX(3.5px);-ms-transform:translateX(-50%) translateX(3.5px);transform:translateX(-50%) translateX(3.5px);border-radius:99px;background:#333;color:white;font-size:10px;}.css-rvz59j .tokens ul,.css-rvz59j .logs ul{height:250px;list-style:none;margin:0;margin-bottom:5px;padding:0;overflow:auto;}.css-rvz59j .tokens{width:25%;}.css-rvz59j .tokens ul{padding:0 5px;}.css-rvz59j .tokens ul li{font-size:14px;border-radius:4px;overflow:hidden;background:#222;color:black;margin-bottom:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;opacity:0.5;}.css-rvz59j .tokens ul li span{color:#999;padding:4px 8px;display:block;}.css-rvz59j .tokens ul li span:nth-child(2){background:#444;color:#eee;}.css-rvz59j .logs{width:75%;}.css-rvz59j .logs ul li{-webkit-transition:opacity 200ms ease;transition:opacity 200ms ease;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:12px;padding:5px 10px;}.css-rvz59j .logs ul li:nth-child(even){background:rgba(0,0,0,0.1);}.css-rvz59j .logs ul:hover li{opacity:0.7;}.css-rvz59j .logs ul:hover li:hover{opacity:1;}.css-rvz59j .logs ul li pre{margin:0;font-family:"Roboto","sans-serif";display:inline-block;}.css-rvz59j .logs ul li pre.mono{font-family:"monospace";}.css-rvz59j .logs ul li pre.pointer{color:rgba(255,255,255,0.15);}.css-rvz59j .logs ul li pre[data-nosel-text]:before{content:attr(data-nosel-text);}.css-rvz59j *::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.08);border-radius:5px;}.css-rvz59j *::-webkit-scrollbar-track{background-color:rgba(0,0,0,0.2);}.css-f2ibaw{box-sizing:border-box;min-width:0;min-height:0;padding-left:10px;}.css-16nde6r{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;box-sizing:border-box;min-width:0;min-height:0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style></head><body><div id="__next"><style data-emotion-css="1xto2hd">*::selection{color:black;background:lime;}*,*:after,*:before{box-sizing:border-box;}body{color:#5b6987;background:#ffffff;font-family:PT Serif,serif;min-height:100vh;padding:0;margin:0;}</style><style data-emotion-css="o6ziba">.css-o6ziba{background:#ffffff;color:white;}</style><div class="css-o6ziba css-15o30dr"><style data-emotion-css="14jaukp">.css-14jaukp{margin-bottom:40px;}@media screen and (min-width:48em){.css-14jaukp{margin-bottom:60px;}}</style><div class="css-14jaukp css-15o30dr"><style data-emotion-css="zuxgf9">.css-zuxgf9{background:url(/_next/static/images/cover-08d5c95160fb4385b4586e13481e642a.jpg) center center;background-size:cover;}</style><div class="css-zuxgf9"><style data-emotion-css="1oi9bcn">.css-1oi9bcn{background:linear-gradient( to bottom, rgba(0,30,0,0.5) 0%, rgba(0,30,30,0.5) 100% );}</style><div class="css-1oi9bcn css-15o30dr"><style data-emotion-css="i2lgx1">.css-i2lgx1{background:transparent;padding:20px 0;}</style><div class="css-i2lgx1 css-15o30dr"><style data-emotion-css="p8646l">.css-p8646l{margin:0 auto;max-width:850px;}</style><div class="css-p8646l css-15o30dr"><style data-emotion-css="1ilvnuj">.css-1ilvnuj{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;color:white;-webkit-transition:color 200ms ease;transition:color 200ms ease;}.css-1ilvnuj:hover{color:rgba(255,255,255,0.7);}</style><a class="css-1ilvnuj css-15o30dr" href="/blog"><style data-emotion-css="1xok4pd">.css-1xok4pd{width:40px;}</style><img src="/_next/static/images/icon-logo-6dd49d886e2dfa493b21300cb8bd53f5.png" class="css-1xok4pd"/><style data-emotion-css="tv3pmz">.css-tv3pmz{font-size:18px;font-family:PT Sans,sans-serif;}</style><div class="css-tv3pmz css-f2ibaw">rena.to<strong>/blog</strong></div></a></div></div><style data-emotion-css="12bljn2">.css-12bljn2{position:relative;padding:0 15px;max-width:850px;margin:0 auto;}</style><div class="css-12bljn2 css-15o30dr"><style data-emotion-css="1j47g5f">.css-1j47g5f{padding:20px 0 40px 0;}@media screen and (min-width:48em){.css-1j47g5f{padding:40px 0 100px 0;}}</style><div class="css-1j47g5f css-15o30dr"><style data-emotion-css="bd75tw">.css-bd75tw{margin:0;color:white;}</style><style data-emotion-css="9if6y2">.css-9if6y2{font-size:32px;font-weight:100;color:#222;font-family:PT Sans,sans-serif;margin:0;color:white;}@media screen and (min-width:48em){.css-9if6y2{font-size:60px;}}</style><h1 class="css-9if6y2 css-15o30dr">Demystifying interpreters</h1></div><style data-emotion-css="m31y3a">.css-m31y3a{padding-bottom:40px;}</style><div class="css-m31y3a css-15o30dr"><style data-emotion-css="b634e7">.css-b634e7{border-radius:99px;color:white;font-family:PT Sans,sans-serif;padding:2px;}</style><div class="css-b634e7 css-xc9yl4"><style data-emotion-css="fql3dn">.css-fql3dn{max-width:100%;border-radius:999px;width:60px;height:60px;border:2px solid transparent;box-shadow:0 0 0 2px lime;margin-right:20px;}</style><img src="https://avatars2.githubusercontent.com/u/3277185?s=200" class="css-fql3dn"/><div class="css-16nde6r"><div><style data-emotion-css="1i4scrm">.css-1i4scrm{font-weight:bold;color:white;}.css-1i4scrm:visited{color:white;}</style><style data-emotion-css="1cyf5ys">.css-1cyf5ys{-webkit-text-decoration:none;text-decoration:none;-webkit-transition:all 300ms ease;transition:all 300ms ease;color:#000000;font-weight:bold;color:white;}.css-1cyf5ys:visited{color:#000000;}.css-1cyf5ys:hover{color:lime;}.css-1cyf5ys:visited{color:white;}</style><a href="https://twitter.com/renatorib_" rel="noopener noreferrer" target="_blank" class="css-1cyf5ys">Renato Ribeiro</a></div><div><time dateTime="Fri, 02 Oct 2020 03:00:00 GMT">Oct 2, 2020</time></div></div></div></div></div></div></div></div><div class="css-12bljn2 css-15o30dr"><div><style data-emotion-css="1xxg5be">.css-1xxg5be{font-size:21px;line-height:1.6em;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;font-weight:400;color:#5b6987;font-family:PT Serif,serif;}</style><p class="paragraph css-1xxg5be css-15o30dr">Before I started writing this article, my knowledge of languages was summarized in: &quot;I have no idea how this stuff works&quot;. And whenever I searched for a basic notion I felt I was reading Greek, I thought everything was magical, mystical. So if you don&#x27;t understand anything about it either, I know exactly how you feel.</p><p class="paragraph css-1xxg5be css-15o30dr">So I had the idea to learn about the topic to create this post. We are learning together. To try to demystify the topic, we will approach everything in practice. Let&#x27;s start from zero and, at the end of this article, we will have a functional interpreter, running mathematical expressions, written in javascript.</p><p class="paragraph css-1xxg5be css-15o30dr">I do not intend to go into too much depth, not least because this is a concept that has existed for several years (literally since the beginning of programming), and there are hundreds of thousands of technical terms, variations, algorithms and approaches. And also because I have basic knowledge on the topic. However, the goal is to move from &quot;I have no idea how it works&quot; to &quot;aaah, so this is how it works&quot;. Do not expect that you will become a compiler ninja.</p><style data-emotion-css="1w5ifpo">.css-1w5ifpo{font-size:26px;}</style><style data-emotion-css="7xg5r8">.css-7xg5r8{position:relative;font-weight:bold;color:#222;font-family:PT Sans,sans-serif;font-size:26px;}.css-7xg5r8:hover .heading-anchor{color:lime;}</style><h4 class="css-7xg5r8 css-15o30dr" id="interpreter-vs-compiler"><style data-emotion-css="1g84dnl">.css-1g84dnl{position:absolute;left:-26px;-webkit-text-decoration:none;text-decoration:none;color:rgba(255,255,255,0.05);-webkit-transition:color 300ms ease;transition:color 300ms ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><a class="heading-anchor css-1g84dnl" href="#interpreter-vs-compiler">#</a>Interpreter vs. Compiler</h4><p class="paragraph css-1xxg5be css-15o30dr">You may have noticed that I mixed the terms compiler and interpreter, and you may have got a knot in your head. And yes, this confusion usually happens. In fact, both are extremely similar, what differs is the end result. Both share the same concepts of construction of lexical, syntactic, semantic analysis, etc. The difference is that in the Interpreter, as the name suggests, the language will be interpreted in the end. That is, in our case, the javascript will decompose our input, translate according to the grammatical rules that we do, and even perform the calculations and return the result, all within the js. It will be a language running inside javascript, just like javascript runs inside C. Compilers, on the other hand, have a process of generating code, and it is more common in low-level languages, such as C, which compiles for Assembly.</p><style data-emotion-css="szlsa3">.css-szlsa3{font-size:36px;}</style><style data-emotion-css="txxvu5">.css-txxvu5{position:relative;font-weight:bold;color:#222;font-family:PT Sans,sans-serif;font-size:36px;}.css-txxvu5:hover .heading-anchor{color:lime;}</style><h2 class="css-txxvu5 css-15o30dr" id="lexical-analysis"><a class="heading-anchor css-1g84dnl" href="#lexical-analysis">#</a>Lexical Analysis</h2><p class="paragraph css-1xxg5be css-15o30dr">This is the first step of our interpreter, and is also known as &quot;tokenizer&quot;, &quot;scanner&quot; or just &quot;lexer&quot;. The purpose of this step is to extract the tokens from our entry. This is an important process for the &quot;disambiguation&quot; of language syntaxes. It is in this stage that they differ that == is one token (equality) and not two = tokens (attribution). In our case, we will not have any of these tokens mentioned because we will only work with mathematical expressions (+, -, <!-- -->*<!-- -->, /, (, ), and numbers).</p><h4 class="css-7xg5r8 css-15o30dr" id="token"><a class="heading-anchor css-1g84dnl" href="#token">#</a>Token</h4><p class="paragraph css-1xxg5be css-15o30dr">Think of a token as a &quot;useful&quot; piece of our entry. It can be a number, a parenthesis, an operator. In more complete languages it can be a keyword, a variable, among others. At the beginning we only have a sequence of characters, which apparently do not mean anything, but at the end that piece of string that had 1 and then 0 was actually a token number of value 10. In our interpreter we will discard all empty spaces. All other characters will be part of the token, as in the example below:</p><p align="center"><img src="data:image/png;base64,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"/></p><p class="paragraph css-1xxg5be css-15o30dr">Lexer&#x27;s job is just the separation of tokens, it doesn&#x27;t care if the syntax is broken (for example, if you have a parenthesis without closing, it won&#x27;t care). Lexical errors are usually an unknown character. If I run 1 % 1, it will have no knowledge of what this % character is, and then, lexer should throw a lexical error.</p><p class="paragraph css-1xxg5be css-15o30dr">We will represent a token as an object that has type and value properties (for literals), so we will have a list of tokens that looks like this:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#999">[</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#905">2</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Star&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;LeftParen&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#905">10</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#905">5</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;RightParen&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;End&quot;</span><span> </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><h4 class="css-7xg5r8 css-15o30dr" id="the-lexer"><a class="heading-anchor css-1g84dnl" href="#the-lexer">#</a>The lexer</h4><p class="paragraph css-1xxg5be css-15o30dr">The algorithm starts with the lexer going through the entire input string, char by char, and understanding when to save the token or continue the analysis.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> lexer </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span>input </span><span class="token" style="color:slategray">/*: string */</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> tokens </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// where our tokens will be stored</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> pointer </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// set the pointer to index 0, that is, at the beginning</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span>pointer </span><span class="token" style="color:#9a6e3a;background:none">&lt;</span><span> input</span><span class="token" style="color:#999">.</span><span class="token property-access">length</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:slategray">// continues execution until the pointer is at the end of the input</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">let</span><span> char </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> input</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// takes the char corresponding to the pointer pos</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:slategray">/* char is token A */</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:slategray">// performs logic based on the char found and</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:slategray">// advances the pointer to continue the execution of the while</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;A&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:slategray">/* char is B */</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;B&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:slategray">// at the end of the while</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:slategray">// throw an error for unhandled characters</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">Unexpected char </span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">${</span><span class="token template-string token interpolation">char</span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">}</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">See an example of a lexer running step-by-step by clicking in next:<br/>
<!-- -->(tip: you can edit the expression in the top input)</p><div class="css-rvz59j"><div class="input"><input type="text" value="(5 + 2) * 10"/></div><div class="box"><div class="actions"><button class="primary">Next →</button><button class="secondary">Reset ↺</button></div><div class="canvas"><div class="rails"><div class="pregroup"><pre class="current">(</pre><pre class="">5</pre><pre class=""> </pre><pre class="">+</pre><pre class=""> </pre><pre class="">2</pre><pre class="">)</pre><pre class=""> </pre><pre class="">*</pre><pre class=""> </pre><pre class="">1</pre><pre class="">0</pre></div><div class="pregroup"><pre></pre><pre>↑</pre></div><div class="pregroup"><pre></pre><pre class="pointer">0</pre></div></div></div></div><div class="box"><div class="tokens"><h3>Tokens</h3><ul></ul></div><div class="logs"><h3>Instructions</h3><ul></ul></div></div></div><p class="paragraph css-1xxg5be css-15o30dr">To better understand the pointer, I explain: the string behaves very similar to an array in terms of indexes and iteration. We were able to access a character from the string by passing its position. That way, each time the pointer is incremented, we can read the next character in the string and apply the logic we want.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> input </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#690">&quot;2 * (10 + 5)&quot;</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#07a">let</span><span> pointer </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>input</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// input[0] -&gt; &#x27;2&#x27;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>input</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// input[1] -&gt; &#x27; &#x27;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>input</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// input[2] -&gt; &#x27;*&#x27;</span></span></div></code></pre></pre><h4 class="css-7xg5r8 css-15o30dr" id="ignoring-whitespaces"><a class="heading-anchor css-1g84dnl" href="#ignoring-whitespaces">#</a>Ignoring whitespaces</h4><p class="paragraph css-1xxg5be css-15o30dr">Whitespaces are essential for writing readable code, and in many cases they also have a syntactic role. In our case, they will just be ignored. So when our lexer finds a whitespace, it just goes on:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.15"><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">lexer</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">input</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> tokens </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> pointer </span><span class="token operator">=</span><span class=""> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">while</span><span class=""> </span><span class="token punctuation">(</span><span class="">pointer </span><span class="token operator">&lt;</span><span class=""> input</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">let</span><span class=""> char </span><span class="token operator">=</span><span class=""> input</span><span class="token punctuation">[</span><span class="">pointer</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot; &quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// increase the pointer so that in the next execution</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// of the while it takes the next char</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// and stop the current execution of the while</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">Unexpected char </span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">${</span><span class="token template-string token interpolation">char</span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">}</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><h4 class="css-7xg5r8 css-15o30dr" id="dealing-with-single-character-tokens"><a class="heading-anchor css-1g84dnl" href="#dealing-with-single-character-tokens">#</a>Dealing with single character tokens</h4><p class="paragraph css-1xxg5be css-15o30dr">Most of the tokens that we will use are of only one character (<style data-emotion-css="159wm0q">.css-159wm0q{font-size:0.8em;padding:3px 8px;border-radius:2px;background:#DFE4E7;font-family:Fira Code,Consolata,monospace;}</style><code class="css-159wm0q css-15o30dr">*</code>, <code class="css-159wm0q css-15o30dr">+</code>, <code class="css-159wm0q css-15o30dr">(</code>, <code class="css-159wm0q css-15o30dr">)</code>, etc), so they are the simplest to parse, since it is not necessary to look at the front characters, only the current one within the iteration:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.15"><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">lexer</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">input</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> tokens </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> pointer </span><span class="token operator">=</span><span class=""> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">while</span><span class=""> </span><span class="token punctuation">(</span><span class="">pointer </span><span class="token operator">&lt;</span><span class=""> input</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">let</span><span class=""> char </span><span class="token operator">=</span><span class=""> input</span><span class="token punctuation">[</span><span class="">pointer</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">if</span><span class=""> </span><span class="token punctuation">(</span><span class="">char </span><span class="token operator">===</span><span class=""> </span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      pointer</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      </span><span class="token keyword">continue</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;+&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// adds the &quot;Plus&quot; token to our token list</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">throw</span><span class=""> </span><span class="token keyword">new</span><span class=""> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string token template-punctuation string">`</span><span class="token template-string token string">Unexpected char </span><span class="token template-string token interpolation token interpolation-punctuation punctuation">${</span><span class="token template-string token interpolation">char</span><span class="token template-string token interpolation token interpolation-punctuation punctuation">}</span><span class="token template-string token template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">After repeating the process with all the other tokens, we will have something like:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.15"><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">lexer</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">input</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> tokens </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> pointer </span><span class="token operator">=</span><span class=""> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">while</span><span class=""> </span><span class="token punctuation">(</span><span class="">pointer </span><span class="token operator">&lt;</span><span class=""> input</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">let</span><span class=""> char </span><span class="token operator">=</span><span class=""> input</span><span class="token punctuation">[</span><span class="">pointer</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot; &quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;+&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;-&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Minus&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;*&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Star&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;/&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Slash&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;(&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;LeftParen&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;)&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;RightParen&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">throw</span><span class=""> </span><span class="token keyword">new</span><span class=""> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string token template-punctuation string">`</span><span class="token template-string token string">Unexpected char </span><span class="token template-string token interpolation token interpolation-punctuation punctuation">${</span><span class="token template-string token interpolation">char</span><span class="token template-string token interpolation token interpolation-punctuation punctuation">}</span><span class="token template-string token template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">;</span></span></div></code></pre></pre><h4 class="css-7xg5r8 css-15o30dr" id="dealing-with-multi-character-tokens"><a class="heading-anchor css-1g84dnl" href="#dealing-with-multi-character-tokens">#</a>Dealing with multi-character tokens</h4><p class="paragraph css-1xxg5be css-15o30dr">There are tokens formed by more than one character, and in most languages this group forms most of the tokens, however, in our case it will only be the token Number.</p><p class="paragraph css-1xxg5be css-15o30dr"><code class="css-159wm0q css-15o30dr">10 + 1000</code> <strong>⟶</strong> <code class="css-159wm0q css-15o30dr">10</code> <code class="css-159wm0q css-15o30dr">+</code> <code class="css-159wm0q css-15o30dr">1000</code></p><p class="paragraph css-1xxg5be css-15o30dr">To cover this scenario, as soon as we find the first character of number, we will observe its next characters and go grouping as long as they remain numbers, and when we find any character that is not what we are looking for, we cancel the process and save the token with the final grouping.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.35"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">lexer</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token parameter">input</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span><span>  </span><span class="token" style="color:#07a">let</span><span> tokens </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span><span>  </span><span class="token" style="color:#07a">let</span><span> pointer </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span>
</span></div><div style="padding:0 1em;opacity:0.35"><span><span>  </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span>pointer </span><span class="token" style="color:#9a6e3a;background:none">&lt;</span><span> input</span><span class="token" style="color:#999">.</span><span class="token property-access">length</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span><span>    </span><span class="token" style="color:#07a">let</span><span> char </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> input</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span>
</span></div><div style="padding:0 1em;opacity:0.35"><span><span>    </span><span class="token" style="color:slategray">// [...]</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:slategray">// let&#x27;s use a simple regex to test if the char is a digit</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token token regex-delimiter" style="color:#e90">/</span><span class="token token language-regex token charset token charset-punctuation" style="color:#999">[</span><span class="token token language-regex token charset token range" style="color:#e90">0</span><span class="token token language-regex token charset token range token range-punctuation" style="color:#9a6e3a;background:none">-</span><span class="token token language-regex token charset token range" style="color:#e90">9</span><span class="token token language-regex token charset token charset-punctuation" style="color:#999">]</span><span class="token token regex-delimiter" style="color:#e90">/</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">test</span><span class="token" style="color:#999">(</span><span>char</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">let</span><span> value </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#690">&quot;&quot;</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// while the char is a number, add no value and advance the pointer</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token token regex-delimiter" style="color:#e90">/</span><span class="token token language-regex token charset token charset-punctuation" style="color:#999">[</span><span class="token token language-regex token charset token range" style="color:#e90">0</span><span class="token token language-regex token charset token range token range-punctuation" style="color:#9a6e3a;background:none">-</span><span class="token token language-regex token charset token range" style="color:#e90">9</span><span class="token token language-regex token charset token charset-punctuation" style="color:#999">]</span><span class="token token regex-delimiter" style="color:#e90">/</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">test</span><span class="token" style="color:#999">(</span><span>char</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>        value </span><span class="token" style="color:#9a6e3a;background:none">+=</span><span> char</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>        pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>        char </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> input</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// when we break the previous while, we add the final result to the tokens</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">parseInt</span><span class="token" style="color:#999">(</span><span>value</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// this time we will not increment the pointer before continue because it</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// is already at a point after the end number for breaking the grouping while</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span>
</span></div><div style="padding:0 1em;opacity:0.35"><span><span>    </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">Unexpected char </span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">${</span><span class="token template-string token interpolation">char</span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">}</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.35"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">At the end of it, we add a token to indicate the end of our expression and return all tokens.
We have our lexer:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">lexer</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token parameter">input</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> tokens </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> pointer </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span>pointer </span><span class="token" style="color:#9a6e3a;background:none">&lt;</span><span> input</span><span class="token" style="color:#999">.</span><span class="token property-access">length</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">let</span><span> char </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> input</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot; &quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;+&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;-&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Minus&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;*&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Star&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;/&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Slash&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;(&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;LeftParen&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>char </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;)&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;RightParen&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token token regex-delimiter" style="color:#e90">/</span><span class="token token language-regex token charset token charset-punctuation" style="color:#999">[</span><span class="token token language-regex token charset token range" style="color:#e90">0</span><span class="token token language-regex token charset token range token range-punctuation" style="color:#9a6e3a;background:none">-</span><span class="token token language-regex token charset token range" style="color:#e90">9</span><span class="token token language-regex token charset token charset-punctuation" style="color:#999">]</span><span class="token token regex-delimiter" style="color:#e90">/</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">test</span><span class="token" style="color:#999">(</span><span>char</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">let</span><span> value </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#690">&quot;&quot;</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token token regex-delimiter" style="color:#e90">/</span><span class="token token language-regex token charset token charset-punctuation" style="color:#999">[</span><span class="token token language-regex token charset token range" style="color:#e90">0</span><span class="token token language-regex token charset token range token range-punctuation" style="color:#9a6e3a;background:none">-</span><span class="token token language-regex token charset token range" style="color:#e90">9</span><span class="token token language-regex token charset token charset-punctuation" style="color:#999">]</span><span class="token token regex-delimiter" style="color:#e90">/</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">test</span><span class="token" style="color:#999">(</span><span>char</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>        value </span><span class="token" style="color:#9a6e3a;background:none">+=</span><span> char</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>        pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>        char </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> input</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>      tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">parseInt</span><span class="token" style="color:#999">(</span><span>value</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">10</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">continue</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">Unexpected char </span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">${</span><span class="token template-string token interpolation">char</span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">}</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  tokens</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">push</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;End&quot;</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> tokens</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><h2 class="css-txxvu5 css-15o30dr" id="syntax-analisys"><a class="heading-anchor css-1g84dnl" href="#syntax-analisys">#</a>Syntax Analisys</h2><p class="paragraph css-1xxg5be css-15o30dr">This step is also known as parsing, and it is the second phase of our interpreter. This is where we will analyze the tokens produced in the lexer to build a tree. Each interpreter has its objectives in this phase, it will depend on each purpose, but in general, most interpreters use this phase to generate hierarchical trees that facilitate a later analysis, both human and by a machine (through patterns such as Visitor Pattern, which we will address it later). Our interpreter will use this phase to generate an abstract syntax tree, better known as AST.</p><p class="paragraph css-1xxg5be css-15o30dr">A particularity of the expressions that makes it more complex to solve is the <strong>precedence of the operators</strong>. It is already intuitive for us, but we learned it at school. Observe the expression below:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-none" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span>4 + 3 * 2</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">Your already knows that you need to solve multiplication first, then solve the sum. And you get the result easily. Our parser will also need to know this, and the best way to represent precedence is using trees:</p><p align="center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMsAAACgCAAAAACHo8d2AAADLUlEQVR42u3cXYHjIBAHcCTgoEiIBCTEwY6DxUFx0DiYOmgdICESRgIS5h7a3afuXRNgob0/r0mW/YWvIZPU6PsUAwsssMACCyywwAILLLDAAgsssMACCyywwAILLLDAAgsssMACy4gWmt/HcnCwwFLFIol5ibeyMIuqqn4SkbVEFFRV9cJf5zBfkoxoyUyTdZ4o3C2BKN3axNzLrW0CfZ1D5L21PlzGsiRv59OaHzeWiByciDxsg5xO3pIMY0necy4YL8KulWarJbhUPPaPdhnAkqePXGEeExf7W6bjEyd9hn/PgW7pbQlUq1qxqa9FXL1Be/J9LUT16s02d7W4tWY0vfS0ZFuzYqaellS1i69TT0vdOymupyXGbiMVFlhezrKEmhXXneH/53msrqXv+lJ3rUy+p6XunexrqdvD+8Zj72SpHCeHnhblqjX33YuNXmCBBZYXsJCRt7FE8ybtIqqLqb7GbLJwqhTvG39ml6OlbpZodtWdV+Z4T1rexshKzhhjzS11Id+H0/pbFjE77mMKk52I4j1p+d2wyZrPew9L34e9s/P5VyyODlstydvj4345u2AfTGTC3p3bWxYnWy3B8Y/dlbOd8uOtxSyNLWJZN1r8nH/8Y7PqyZweHz3uzPM8bSHSjZbw8Zc7I6r6Y67/ODW1sJONlqVgGzrHlhZnnXPGPp9OKkoIZpdbtgszs/X89D9Ytp8PseV4Ud3Wx3xRjLDriVMzS2Ggtyc12yq2LH0wOK3jWK6FL13SeRxL6aO8kSyliac918MCCyyvP4+F5X0sWF/alNJ05J7QFJb2seVIltJE7UhxcubCuWOg/UuPAgsssMACy8NyiVGKVqe4yBgWcZa8WYqun7Zf38RCTlTD/q9CyOU91zexLCdVve5/GcEGVb2adZixH01Z9p5NHsOSOJiy6DI70jEs0dvCr5jm7bmodn0sFH0RFnak1dpZxBS8dhDtKHuxA6nqalLBvLGngzaxRHtW8ft3yWdzFBEZYx47GmP8/iDG334DwA8yXkT01wviZFhggQUWWGCBBRZYYIEFFlhggQUWWGCBBRZYYIEFFlhgea3yB932EtMqGBnLAAAAAElFTkSuQmCC"/></p><p class="paragraph css-1xxg5be css-15o30dr">When disassembling our expression, and assembling our tree, we start with the operators with the lowest precedence (in this case, the <code class="css-159wm0q css-15o30dr">+</code>), so that the operators with the highest prevalence (<code class="css-159wm0q css-15o30dr">*</code>) are at the end. For it is from the bottom up that we will solve our tree:</p><p align="center"><img src="data:image/png;base64,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"/></p><style data-emotion-css="qhp3qs">.css-qhp3qs{font-size:30px;}</style><style data-emotion-css="10dos44">.css-10dos44{position:relative;font-weight:bold;color:#222;font-family:PT Sans,sans-serif;font-size:30px;}.css-10dos44:hover .heading-anchor{color:lime;}</style><h3 class="css-10dos44 css-15o30dr" id="recursive-descent-parser"><a class="heading-anchor css-1g84dnl" href="#recursive-descent-parser">#</a>Recursive Descent Parser</h3><p class="paragraph css-1xxg5be css-15o30dr">Okay, it looks simple, right? This is because the example is simple, but what if we mix unary operators (like negative)? Parentheses (subexpressions)? How to transform tokens into a tree considering different orders of precedence? Among several techniques and algorithms to deal with this parsing problem, there is the recursive descent, which is one of the best known for being both simple (at least simpler than others) and efficient. And that’s what I’m going to use to build our parser.</p><p class="paragraph css-1xxg5be css-15o30dr">It is called recursive descent because it consists of several recursive functions that go in a descending order. These functions represent rules of a <strong>grammar</strong>, so for each rule of our grammar there is a function dedicated to solving it within our parser.</p><h4 class="css-7xg5r8 css-15o30dr" id="grammar"><a class="heading-anchor css-1g84dnl" href="#grammar">#</a>Grammar</h4><p class="paragraph css-1xxg5be css-15o30dr">The concept of grammars is one of the pillars at this stage, and quite powerful. This is because grammars are able to define operations from tokens and at the same time define an order of priority (along with recursion), solving our precedence problem.</p><p class="paragraph css-1xxg5be css-15o30dr">To better understand, imagine that a grammar is a set of rules within our expression. For example, multiplication is a rule within our grammar represented by the tokens of <code class="css-159wm0q css-15o30dr">Number</code>, <code class="css-159wm0q css-15o30dr">Star</code> and <code class="css-159wm0q css-15o30dr">Number</code>, in that sequence. Without this, there is no multiplication because I cannot multiply anything without having two values (two <code class="css-159wm0q css-15o30dr">Number</code>s), and in this case the <code class="css-159wm0q css-15o30dr">Star</code> to indicate that I need to do the multiplication.</p><p class="paragraph css-1xxg5be css-15o30dr">Following the same logic, our addition rule would be the joining of the <code class="css-159wm0q css-15o30dr">Number</code>, <code class="css-159wm0q css-15o30dr">Plus</code> and <code class="css-159wm0q css-15o30dr">Number</code> tokens, right? Well, the idea is there, but not quite. Within the recursive parser we define the grammar in the reverse order of precedence – <em>addition comes before the multiplication here, for the same reason that we started breaking the tree by the <code class="css-159wm0q css-15o30dr">+</code> operator at the beginning of this topic</em> – only when we define a low precedence rule, we use the next rule (of higher precedence) as the definition value, as in the example below:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-none" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span>Addition = Multiplication &quot;Plus&quot; Multiplication
</span></span></div><div style="padding:0 1em"><span>Multiplication = Number &quot;Star&quot; Number
</span></div><div style="padding:0 1em"><span>Number = &quot;Number&quot;
</span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">However, our expression may not have a multiplication, so how will it solve the addition? Let&#x27;s adapt our multiplication rule to return an &quot;or&quot;.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-none" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span>Multiplication = (Number &quot;Star&quot; Number) OR Number</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">That way, if there is no sequence of <code class="css-159wm0q css-15o30dr">number</code>, <code class="css-159wm0q css-15o30dr">Star</code> and <code class="css-159wm0q css-15o30dr">number</code>, it will only return the <code class="css-159wm0q css-15o30dr">number</code>, because we don&#x27;t have a multiplication. We will do the same in addition, because we may not have an addition in our expression. Remember, a simple number (<code class="css-159wm0q css-15o30dr">5</code>) is already a valid expression.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-none" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span>Addition = (Multiplication &quot;Plus&quot; Multiplication) OR Multiplication
</span></span></div><div style="padding:0 1em"><span>Multiplication = (Number &quot;Star&quot; Number) OR Number
</span></div><div style="padding:0 1em"><span>Number = &quot;Number&quot;
</span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">This definition means that when we create the algorithm, when looking for an addition, it will look for multiplications within the recursion. Remember that each of these rules will become functions in our parser, so for the example above we would have something like <code class="css-159wm0q css-15o30dr">add()</code> and <code class="css-159wm0q css-15o30dr">mul()</code>.</p><p class="paragraph css-1xxg5be css-15o30dr"><strong>The addition function would look for multiplications to be solved before (since within a recursive function, the first executions use the value of the last executions, causing the multiplication to be solved before the addition).</strong></p><p class="paragraph css-1xxg5be css-15o30dr">A little confused, right? But let&#x27;s get there. There is a notation for defining grammars, and it will help to facilitate understanding. They somewhat resemble regular expressions.</p><p class="paragraph css-1xxg5be css-15o30dr">Here is the same example used above, in <em>grammar notation</em>:
(I will explain the details below)</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-none" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span>expr → add
</span></span></div><div style="padding:0 1em"><span>add  → mul (PLUS mul)*
</span></div><div style="padding:0 1em"><span>mul  → num (STAR num)*
</span></div><div style="padding:0 1em"><span>num  → NUMBER
</span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">The rules when used in the definitions are called <code class="css-159wm0q css-15o30dr">nonterminals</code>, as they are not terminal, they have to be executed within the recursion until they become the terminals that are final values (our tokens are terminals). In <code class="css-159wm0q css-15o30dr">mul (PLUS mul)*</code>, <code class="css-159wm0q css-15o30dr">mul</code>s are the nonterminals, while <code class="css-159wm0q css-15o30dr">PLUS</code> is a terminal.</p><p class="paragraph css-1xxg5be css-15o30dr">In our grammar, nonterminals are represented in lower case (<code class="css-159wm0q css-15o30dr">expr</code>, <code class="css-159wm0q css-15o30dr">add</code>, <code class="css-159wm0q css-15o30dr">mul</code>, <code class="css-159wm0q css-15o30dr">num</code>), while the terminals are represented in upper case (<code class="css-159wm0q css-15o30dr">PLUS</code>, <code class="css-159wm0q css-15o30dr">STAR</code>, <code class="css-159wm0q css-15o30dr">NUMBER</code>).</p><p align="center"><img src="data:image/png;base64,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"/></p><p class="paragraph css-1xxg5be css-15o30dr">As in regular expressions, parentheses are used for grouping, and the asterisk is used to say that that value (or grouping, in our case) <strong>can be repeated 0 or more times</strong>.</p><p class="paragraph css-1xxg5be css-15o30dr">In other words, in the rule <code class="css-159wm0q css-15o30dr">mul → num (STAR num)*</code> I am saying that the <code class="css-159wm0q css-15o30dr">mul</code> will have a product that has <code class="css-159wm0q css-15o30dr">num</code> and may have an infinite repetition of <code class="css-159wm0q css-15o30dr">PLUS num</code>. Like this:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#905">5</span><span>           </span><span class="token" style="color:slategray">// num</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#905">5</span><span> </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> </span><span class="token" style="color:#905">5</span><span>       </span><span class="token" style="color:slategray">// num (STAR num)</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#905">5</span><span> </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> </span><span class="token" style="color:#905">5</span><span> </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> </span><span class="token" style="color:#905">5</span><span>   </span><span class="token" style="color:slategray">// num (STAR num) (STAR num)</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">As you can see, our <code class="css-159wm0q css-15o30dr">(STAR num)</code> representation are repeated zero or more times</p><h4 class="css-7xg5r8 css-15o30dr" id="the-parser"><a class="heading-anchor css-1g84dnl" href="#the-parser">#</a>The parser</h4><p class="paragraph css-1xxg5be css-15o30dr">I know very well that just from theory, things are difficult to understand. I suffered for it. So let&#x27;s start coding our parser based on the assumption that we only have addition and multiplication, for simplicity, and then we&#x27;ll add the other operators.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">parser</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token parameter">tokens</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> pointer </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// ...</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">We started with the same premise as Lexer. We will use a pointer to cycle through tokens, but unlike lexer, we will create some support functions so that our parser is not so confused:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.15"><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">parser</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">tokens</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> pointer </span><span class="token operator">=</span><span class=""> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">peek</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> tokens</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">prev</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> tokens</span><span class="token" style="color:#999">[</span><span>pointer </span><span class="token" style="color:#9a6e3a;background:none">-</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">match</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token parameter">type</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">peek</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> type</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">In parts: <code class="css-159wm0q css-15o30dr">peek</code> and <code class="css-159wm0q css-15o30dr">prev</code> functions are simple, they bring us the current token and the previous token, respectively, according to our pointer.</p><p class="paragraph css-1xxg5be css-15o30dr">The <code class="css-159wm0q css-15o30dr">match</code> function will help us to identify the terminals by types from our pointer. So if you need to know if the pointer is in a Number type token, just use <code class="css-159wm0q css-15o30dr">match(&#x27;Number&#x27;)</code>, if the answer is yes, it will return true and advance the pointer, if not, it will just return false.</p><p class="paragraph css-1xxg5be css-15o30dr">From here we can already build our recursive functions from the rules of our grammar. For now we are not going to set up an AST, but just solve the expression and get the final result.</p><p class="paragraph css-1xxg5be css-15o30dr">Our <code class="css-159wm0q css-15o30dr">expr</code> rule is really as simple as the notation demonstrates: it returns the execution of <code class="css-159wm0q css-15o30dr">add</code> function that does not exist yet.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.15"><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">parser</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">tokens</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> pointer </span><span class="token operator">=</span><span class=""> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">peek</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> tokens</span><span class="token punctuation">[</span><span class="">pointer</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">prev</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> tokens</span><span class="token punctuation">[</span><span class="">pointer </span><span class="token operator">-</span><span class=""> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">match</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">type</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">if</span><span class=""> </span><span class="token punctuation">(</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">type</span><span class=""> </span><span class="token operator">===</span><span class=""> type</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      pointer</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      </span><span class="token keyword">return</span><span class=""> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token boolean">false</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:slategray">// expr → add</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">expr</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">add</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">The <code class="css-159wm0q css-15o30dr">add</code> function rule will return a result that starts with <code class="css-159wm0q css-15o30dr">mul</code>, and as long as it finds the <code class="css-159wm0q css-15o30dr">PLUS</code> token, it will add to the next <code class="css-159wm0q css-15o30dr">mul</code>. The while here represents the asterisk of the notation very well.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.15"><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">parser</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">tokens</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> pointer </span><span class="token operator">=</span><span class=""> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">peek</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> tokens</span><span class="token punctuation">[</span><span class="">pointer</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">prev</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> tokens</span><span class="token punctuation">[</span><span class="">pointer </span><span class="token operator">-</span><span class=""> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">match</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">type</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">if</span><span class=""> </span><span class="token punctuation">(</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">type</span><span class=""> </span><span class="token operator">===</span><span class=""> type</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      pointer</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      </span><span class="token keyword">return</span><span class=""> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token boolean">false</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">expr</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:slategray">// add → mul (PLUS mul)*</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">add</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:slategray">// mul</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">let</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:slategray">// (PLUS mul)*</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:slategray">// if it finds the &quot;Plus&quot; token then it will add to the following `mul()`</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">+</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">The <code class="css-159wm0q css-15o30dr">mul</code> rule is identical to the add, but now it will use the num with the <code class="css-159wm0q css-15o30dr">STAR</code> operator.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.15"><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">parser</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">tokens</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> pointer </span><span class="token operator">=</span><span class=""> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">peek</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> tokens</span><span class="token punctuation">[</span><span class="">pointer</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">prev</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> tokens</span><span class="token punctuation">[</span><span class="">pointer </span><span class="token operator">-</span><span class=""> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">match</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">type</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">if</span><span class=""> </span><span class="token punctuation">(</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">type</span><span class=""> </span><span class="token operator">===</span><span class=""> type</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      pointer</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      </span><span class="token keyword">return</span><span class=""> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token boolean">false</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">expr</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">add</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">let</span><span class=""> result </span><span class="token operator">=</span><span class=""> </span><span class="token function">mul</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">while</span><span class=""> </span><span class="token punctuation">(</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;Plus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      result </span><span class="token operator">=</span><span class=""> result </span><span class="token operator">+</span><span class=""> </span><span class="token function">mul</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> result</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:slategray">// mul → num (STAR num)*</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">mul</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:slategray">// num</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">let</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">num</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:slategray">// (STAR num)*</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Star&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> </span><span class="token" style="color:#DD4A68">num</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">Finally our last rule. Since <code class="css-159wm0q css-15o30dr">NUMBER</code> is a terminal we have to ensure that it is the <code class="css-159wm0q css-15o30dr">Number</code> token, and return its token value, terminal in fact. And as it is the last rule of our parser, if it arrived here and it is not a <code class="css-159wm0q css-15o30dr">Number</code>, then we have a syntax error because it was not captured by any of our grammatical rules (for example 5 + <!-- -->*<!-- --> 3). For this we will throw a <code class="css-159wm0q css-15o30dr">Error</code>.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em;opacity:0.15"><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">parser</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">tokens</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">let</span><span class=""> pointer </span><span class="token operator">=</span><span class=""> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">peek</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> tokens</span><span class="token punctuation">[</span><span class="">pointer</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">prev</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> tokens</span><span class="token punctuation">[</span><span class="">pointer </span><span class="token operator">-</span><span class=""> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">match</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token parameter">type</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">if</span><span class=""> </span><span class="token punctuation">(</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">type</span><span class=""> </span><span class="token operator">===</span><span class=""> type</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      pointer</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      </span><span class="token keyword">return</span><span class=""> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token boolean">false</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">expr</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">add</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">let</span><span class=""> result </span><span class="token operator">=</span><span class=""> </span><span class="token function">mul</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">while</span><span class=""> </span><span class="token punctuation">(</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;Plus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      result </span><span class="token operator">=</span><span class=""> result </span><span class="token operator">+</span><span class=""> </span><span class="token function">mul</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> result</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token keyword">const</span><span class=""> </span><span class="token function-variable function">mul</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token arrow operator">=&gt;</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">let</span><span class=""> result </span><span class="token operator">=</span><span class=""> </span><span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">while</span><span class=""> </span><span class="token punctuation">(</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;Star&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">      result </span><span class="token operator">=</span><span class=""> result </span><span class="token operator">*</span><span class=""> </span><span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class="">
</span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> result</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:slategray">// num → NUMBER</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">num</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:slategray">// NUMBER</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>      </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">value</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span>
</span></div><div style="padding:0 1em;opacity:1"><span><span>    </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">Syntax Error: Unexpected </span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">${</span><span class="token template-string token interpolation token" style="color:#DD4A68">peek</span><span class="token template-string token interpolation token" style="color:#999">(</span><span class="token template-string token interpolation token" style="color:#999">)</span><span class="token template-string token interpolation token" style="color:#999">.</span><span class="token template-string token interpolation token property-access">type</span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">}</span><span class="token template-string token" style="color:#690"> token</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:1"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em;opacity:0.15"><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">In the end, the parser returns the execution of the first rule...</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">expr</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">...and the recursion does everything else:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">parser</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token parameter">tokens</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> pointer </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">peek</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> tokens</span><span class="token" style="color:#999">[</span><span>pointer</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">prev</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> tokens</span><span class="token" style="color:#999">[</span><span>pointer </span><span class="token" style="color:#9a6e3a;background:none">-</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">match</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token parameter">type</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">peek</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> type</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      pointer</span><span class="token" style="color:#9a6e3a;background:none">++</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// expr → add</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">expr</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">add</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// add  → mul (PLUS mul)*</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">add</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">let</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">+</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// mul  → num (STAR num)*</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">mul</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">let</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">num</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Star&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> </span><span class="token" style="color:#DD4A68">num</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// num  → NUMBER</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">num</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">value</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">Syntax Error: Unexpected </span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">${</span><span class="token template-string token interpolation token" style="color:#DD4A68">peek</span><span class="token template-string token interpolation token" style="color:#999">(</span><span class="token template-string token interpolation token" style="color:#999">)</span><span class="token template-string token interpolation token" style="color:#999">.</span><span class="token template-string token interpolation token property-access">type</span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">}</span><span class="token template-string token" style="color:#690"> token</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">expr</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">At this point you already have a parser running with precedence between <code class="css-159wm0q css-15o30dr">+</code> and <code class="css-159wm0q css-15o30dr">*</code>!</p><style data-emotion-css="1188xl0">.css-1188xl0{margin:20px 0;padding:10px 20px;border-left:7px solid rgba(0,0,0,0.06);background:#F3F8FB;font-style:italic;font-family:PT Serif,serif;color:#888;border-radius:0 5px 5px 0;}.css-1188xl0 p{color:#888;}.css-1188xl0 .blockquote{padding:10px 15px;border-radius:1px;border-left:none;font-style:normal;background:#ffffff;}.css-1188xl0 .blockquote p{margin:0;padding:0;font-size:16px;}.css-1188xl0 .blockquote p:first-of-type{margin-top:0;}.css-1188xl0 .blockquote p:last-of-type{margin-bottom:0;}</style><blockquote class="blockquote css-1188xl0 css-15o30dr"><p class="paragraph css-1xxg5be css-15o30dr">You can check the current parser we built in <style data-emotion-css="xanzd0">.css-xanzd0{-webkit-text-decoration:none;text-decoration:none;-webkit-transition:all 300ms ease;transition:all 300ms ease;color:#000000;}.css-xanzd0:visited{color:#000000;}.css-xanzd0:hover{color:lime;}</style><a href="https://repl.it/@renatorib/parser-v1" class="css-xanzd0">this link</a></p></blockquote><h4 class="css-7xg5r8 css-15o30dr" id="subtraction-and-division"><a class="heading-anchor css-1g84dnl" href="#subtraction-and-division">#</a>Subtraction and Division</h4><p class="paragraph css-1xxg5be css-15o30dr">As I said before, we only use addition and multiplication to simplify, but the time has come to add new operators. Here we will enter a new precedence rule for us. Unlike addition and multiplication, which have precedence among themselves, addition and subtraction do not. They are executed in the order they come. Just like multiplication and division. Therefore, we cannot separate both into different rules, because different rules represent different precedence.</p><p class="paragraph css-1xxg5be css-15o30dr">Then we will use a simple &quot;or&quot; inside our token, so that it matches any of the two:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-diff" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token unchanged token prefix unchanged"> </span><span class="token unchanged token line"> expr → add
</span></span></div><div style="padding:0 1em"><span><span class="token unchanged token line"></span><span class="token deleted-sign token prefix" style="color:#905">-</span><span class="token deleted-sign token line" style="color:#905"> add  → mul (PLUS mul)*
</span></span></div><div style="padding:0 1em"><span><span class="token deleted-sign token line" style="color:#905"></span><span class="token inserted-sign token prefix" style="color:#690">+</span><span class="token inserted-sign token line" style="color:#690"> add  → mul ((PLUS | MINUS) mul)*
</span></span></div><div style="padding:0 1em"><span><span class="token inserted-sign token line" style="color:#690"></span><span class="token deleted-sign token prefix" style="color:#905">-</span><span class="token deleted-sign token line" style="color:#905"> mul  → num (STAR num)*
</span></span></div><div style="padding:0 1em"><span><span class="token deleted-sign token line" style="color:#905"></span><span class="token inserted-sign token prefix" style="color:#690">+</span><span class="token inserted-sign token line" style="color:#690"> mul  → num ((STAR | SLASH) num)*
</span></span></div><div style="padding:0 1em"><span><span class="token inserted-sign token line" style="color:#690"></span><span class="token unchanged token prefix unchanged"> </span><span class="token unchanged token line"> num  → NUMBER</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">Okay, now that we&#x27;ve updated our grammar, let&#x27;s update our parser. As we only change the add and mul rules, it is only in these functions that we will change:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:slategray">// add → mul ((PLUS | MINUS) mul)*</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">add</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// mul</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// ((PLUS | MINUS) mul)*</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:none">||</span><span> </span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Minus&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:slategray">// we need to check if the token that matched is Plus or Minus to do the correct operation</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:slategray">// we use prev because the pointer has already advanced through the match</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">+</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Minus&quot;</span><span class="token" style="color:#999">)</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">-</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:slategray">// mul → num ((STAR | SLASH) num)*</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">mul</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// num</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">num</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// ((STAR | SLASH) num)*</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Star&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:none">||</span><span> </span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Slash&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Star&quot;</span><span class="token" style="color:#999">)</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> </span><span class="token" style="color:#DD4A68">num</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Slash&quot;</span><span class="token" style="color:#999">)</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">/</span><span> </span><span class="token" style="color:#DD4A68">num</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><blockquote class="blockquote css-1188xl0 css-15o30dr"><p class="paragraph css-1xxg5be css-15o30dr">You can check the current parser we built in <a href="https://repl.it/@renatorib/parser-v2" class="css-xanzd0">this link</a></p></blockquote><h4 class="css-7xg5r8 css-15o30dr" id="unary-operators"><a class="heading-anchor css-1g84dnl" href="#unary-operators">#</a>Unary Operators</h4><p class="paragraph css-1xxg5be css-15o30dr">So far we only deal with binary operators, that is, when the operator needs two values to generate a result. However, there are operators that are unary, such as the negative number (-5) and the positive number (+5). Although the tokens are the same, they cannot be confused with subtraction and addition. Unary operations have a higher precedence than binary ones.</p><p align="center"><img src="data:image/png;base64,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"/></p><p class="paragraph css-1xxg5be css-15o30dr">Knowing this, we will add the unaries rule <code class="css-159wm0q css-15o30dr">(PLUS | MINUS)</code> number to our grammar.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-diff" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token unchanged token prefix unchanged"> </span><span class="token unchanged token line"> expr → add
</span></span></div><div style="padding:0 1em"><span><span class="token unchanged token line"></span><span class="token unchanged token prefix unchanged"> </span><span class="token unchanged token line"> add  → mul ((PLUS | MINUS) mul)*
</span></span></div><div style="padding:0 1em"><span><span class="token unchanged token line"></span><span class="token deleted-sign token prefix" style="color:#905">-</span><span class="token deleted-sign token line" style="color:#905"> mul  → num ((STAR | SLASH) num)*
</span></span></div><div style="padding:0 1em"><span><span class="token deleted-sign token line" style="color:#905"></span><span class="token inserted-sign token prefix" style="color:#690">+</span><span class="token inserted-sign token line" style="color:#690"> mul  → una ((STAR | SLASH) una)*
</span></span></div><div style="padding:0 1em"><span><span class="token inserted-sign token line" style="color:#690"></span><span class="token inserted-sign token prefix" style="color:#690">+</span><span class="token inserted-sign token line" style="color:#690"> una  → ((PLUS | MINUS) una) | num
</span></span></div><div style="padding:0 1em"><span><span class="token inserted-sign token line" style="color:#690"></span><span class="token unchanged token prefix unchanged"> </span><span class="token unchanged token line"> num  → NUMBER</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">First we need to change the <code class="css-159wm0q css-15o30dr">mul</code> rule, because the next rule is no longer <code class="css-159wm0q css-15o30dr">num</code>, but our new <code class="css-159wm0q css-15o30dr">una</code> rule. There is a peculiarity in this new rule, which is the fact that the unary operator can operate on other unary operators. Note: <code class="css-159wm0q css-15o30dr">- - 5</code>, this is a valid expression. They consist of two nested negative numbers, which results in a positive number 5 (minus minus equals plus). Just as the expression <code class="css-159wm0q css-15o30dr">- - + -5</code> is also valid. For this reason, in the one rule we use it <strong>itself</strong> as a nontermial after the operator.</p><p class="paragraph css-1xxg5be css-15o30dr">So let&#x27;s implement.</p><p class="paragraph css-1xxg5be css-15o30dr">In the <code class="css-159wm0q css-15o30dr">mul</code> rule we will just replace the <code class="css-159wm0q css-15o30dr">num</code> by <code class="css-159wm0q css-15o30dr">una</code>:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:slategray">// mul → una ((STAR | SLASH) una)*</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">mul</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// una</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">una</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// ((STAR | SLASH) una)*</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Star&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:none">||</span><span> </span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Slash&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Star&quot;</span><span class="token" style="color:#999">)</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> </span><span class="token" style="color:#DD4A68">una</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Slash&quot;</span><span class="token" style="color:#999">)</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">/</span><span> </span><span class="token" style="color:#DD4A68">una</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">And our new <code class="css-159wm0q css-15o30dr">una</code> rule</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:slategray">// una → ((PLUS | MINUS) una) | num</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">una</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// ((PLUS | MINUS) una)</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:none">||</span><span> </span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Minus&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:none">+</span><span class="token" style="color:#DD4A68">una</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Minus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:none">-</span><span class="token" style="color:#DD4A68">una</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// | num</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">num</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><blockquote class="blockquote css-1188xl0 css-15o30dr"><p class="paragraph css-1xxg5be css-15o30dr">You can check the current parser we built in <a href="https://repl.it/@renatorib/parser-v3" class="css-xanzd0">this link</a></p></blockquote><h4 class="css-7xg5r8 css-15o30dr" id="subexpressions"><a class="heading-anchor css-1g84dnl" href="#subexpressions">#</a>Subexpressions</h4><p class="paragraph css-1xxg5be css-15o30dr">Subexpressions - <em>the parentheses</em> - allow us, more than grouping, to break the line of precedence of expressions. They have the highest precedence within expressions, that is, they are calculated before any other. So if on the one hand, in this expression <code class="css-159wm0q css-15o30dr">4 + 3 * 2</code> the multiplication is calculated first, in this other <code class="css-159wm0q css-15o30dr">(4 + 3) * 2</code> the subexpression <code class="css-159wm0q css-15o30dr">4 + 3</code> is calculated first, and consequently, the addition as well. Bringing two different results. However, within subexpression, the order of precedence is still respected, for example in <code class="css-159wm0q css-15o30dr">(4 + 3 * 2) * 2</code>, although the parenthesis is calculated first, it will start with 3 <!-- -->*<!-- --> 2. Knowing this, note that subexpressions, as the name suggests, they are nothing more than whole expressions that will be executed before. We already have the rule that deals with the expressions <code class="css-159wm0q css-15o30dr">expr</code>, we just need to identify the subexpressions by the parenthesis tokens and use the rule.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-diff" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token unchanged token prefix unchanged"> </span><span class="token unchanged token line"> expr → add
</span></span></div><div style="padding:0 1em"><span><span class="token unchanged token line"></span><span class="token unchanged token prefix unchanged"> </span><span class="token unchanged token line"> add  → mul ((PLUS | MINUS) mul)*
</span></span></div><div style="padding:0 1em"><span><span class="token unchanged token line"></span><span class="token unchanged token prefix unchanged"> </span><span class="token unchanged token line"> mul  → una ((STAR | SLASH) una)*
</span></span></div><div style="padding:0 1em"><span><span class="token unchanged token line"></span><span class="token deleted-sign token prefix" style="color:#905">-</span><span class="token deleted-sign token line" style="color:#905"> una  → ((PLUS | MINUS) una) | num
</span></span></div><div style="padding:0 1em"><span><span class="token deleted-sign token line" style="color:#905"></span><span class="token inserted-sign token prefix" style="color:#690">+</span><span class="token inserted-sign token line" style="color:#690"> una  → ((PLUS | MINUS) una) | prim
</span></span></div><div style="padding:0 1em"><span><span class="token inserted-sign token line" style="color:#690"></span><span class="token deleted-sign token prefix" style="color:#905">-</span><span class="token deleted-sign token line" style="color:#905"> num  → NUMBER
</span></span></div><div style="padding:0 1em"><span><span class="token deleted-sign token line" style="color:#905"></span><span class="token inserted-sign token prefix" style="color:#690">+</span><span class="token inserted-sign token line" style="color:#690"> prim → NUMBER | LEFTPAREN expr RIGHTPAREN</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">The only thing we did was add <code class="css-159wm0q css-15o30dr">| LEFTPAREN expr RIGHTPAREN</code> in the rule of num. But we also had to change the name because it didn&#x27;t make sense here anymore. We use <code class="css-159wm0q css-15o30dr">prim</code> from primary. The name here is quite arbitrary, it could be anything. To change the name of <code class="css-159wm0q css-15o30dr">num</code> we also had to touch the rule of <code class="css-159wm0q css-15o30dr">una</code>.</p><p class="paragraph css-1xxg5be css-15o30dr">Fix in <code class="css-159wm0q css-15o30dr">una</code> function:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-diff" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token deleted-sign token prefix" style="color:#905">-</span><span class="token deleted-sign token line" style="color:#905"> // | num
</span></span></div><div style="padding:0 1em"><span><span class="token deleted-sign token line" style="color:#905"></span><span class="token deleted-sign token prefix" style="color:#905">-</span><span class="token deleted-sign token line" style="color:#905"> return num()
</span></span></div><div style="padding:0 1em"><span><span class="token deleted-sign token line" style="color:#905"></span><span class="token inserted-sign token prefix" style="color:#690">+</span><span class="token inserted-sign token line" style="color:#690"> // | prim
</span></span></div><div style="padding:0 1em"><span><span class="token inserted-sign token line" style="color:#690"></span><span class="token inserted-sign token prefix" style="color:#690">+</span><span class="token inserted-sign token line" style="color:#690"> return prim()</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">Older <code class="css-159wm0q css-15o30dr">num</code>, now <code class="css-159wm0q css-15o30dr">prim</code> function:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:slategray">// prim → NUMBER | LEFTPAREN expr RIGHTPAREN</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">prim</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// NUMBER</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access">value</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// | LEFTPAREN expr RIGHTPAREN</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;LeftParen&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">const</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">expr</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;RightParen&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">Syntax Error: Expecting closing paren</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">Syntax Error: Unexpected </span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">${</span><span class="token template-string token interpolation token" style="color:#DD4A68">peek</span><span class="token template-string token interpolation token" style="color:#999">(</span><span class="token template-string token interpolation token" style="color:#999">)</span><span class="token template-string token interpolation token" style="color:#999">.</span><span class="token template-string token interpolation token property-access">type</span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">}</span><span class="token template-string token" style="color:#690"> token</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">The idea is quite simple, when finding a <code class="css-159wm0q css-15o30dr">LEFTPAREN</code>, we save a result with the result of <code class="css-159wm0q css-15o30dr">expr()</code> and only return it if it finds a <code class="css-159wm0q css-15o30dr">RIGHTPAREN</code> that closes the subexpression, otherwise we have a &quot;unexpected end of input&quot; error (unclosed paren)</p><blockquote class="blockquote css-1188xl0 css-15o30dr"><p class="paragraph css-1xxg5be css-15o30dr">You can check the current parser we built in <a href="https://repl.it/@renatorib/parser-v4" class="css-xanzd0">this link</a></p></blockquote><h2 class="css-txxvu5 css-15o30dr" id="abstract-syntax-tree-ast"><a class="heading-anchor css-1g84dnl" href="#abstract-syntax-tree-ast">#</a>Abstract Syntax Tree (AST)</h2><p class="paragraph css-1xxg5be css-15o30dr">If you remember, at the beginning of this topic of Syntax Analysis, I said that we would build our AST. But where is it? I skipped that part. Instead, we used the parser to interpret the code directly, something like this:</p><p align="center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAACgCAMAAADNYG7tAAAAsVBMVEUAAAAQEBAfHx8gICAwMDBAQEBQUFBfX19gYGBvb29wcHB/f3+AgICPj4+QkJCfn5+goKCkpKSpqamqqqqvr6+wsLC/v7/AwMDGxsbLy8vMzMzPz8/R0dHS0tLf39/v7+/09PT5+fn6+vr/AAD/EBD/Hx//ICD/MDD/QED/UFD/X1//YGD/b2//cHD/f3//gID/j4//kJD/n5//oKD/r6//sLD/v7//z8//39//7+////9mpNm6AAAJgklEQVR42u3db3ObxhqG8YcgdAjBktu6NKdql7RLkFwqEzkpguv7f7DzAiTLiXxiK5L/NPc94xkP2GLhJ3bZRzsjQ/nuYroEQleErghdEboidEXoitAVoStCV4SuCF0RuiJ0ReiK0BWhK0IXuiJ0ReiK0BWhK0JXhK4IXRG6InRF6IrQFaErQleErghdEbrQFaErQleErghdEboidEXoynNC//3HH06aH389evNfYJMBqAv/yCmWe9F/ffvnad9g797+fuRXfIFNBmD5V/fYd3f7V70P/ad3pz7wHz8d+QVfYJMBKNrH79O7Yh/6D6c/8A/P/PUe6xD+KUZyL3ShC13oQhe60IUudKELXehCF7rQhS50oQtd6EIXutCFLnSh/zvQ29XpsWuhPy/0pf98OUVbH7rA4tO10F9G9/7FcorGH7rColocDz1L4vMcIJ/EqQNc6oDJBTBLyeJktrMTsiQ5F/p90Nu6rnuR1bpdLj8CTV35ZV2vAZpq2fR7m25V1dCs2rr6uLmrV9WyA9q6+tgCq3peDi/Xraq6f+dcV8v2EPQkiMdhmIMLw3gUZJBZBryKgaklQRhm4IKo30lq0TgcCf0e6OvFYt7/+n5RVgu/gk/Vwl9WVQNURXXZg71flGW5gLqYV5d+AVDN50VZdPCpWFRl2cHfVVlWVQW05bwqizWw9IvL4gD03KbgbAKjMIdxkN9GH+cAhBEwHoGzM3B2LvR7de/XA3rZQVXsdu/XvoUPvgXe+360rv0arn0DVP6q7yzKK+j6pa6b7r1cAIsFNP4DrA9BD5K+13Z2QX+X30Lvd85s6OxJQoBRfOQrOJ29SPT9zd6DXm+Yt+jzCqBYAe8vGdABiiWbN8jmf5blDvraN8A/vmNZHDqmX4Q2ShxkNgOw89vow7hvm7OLzMzMoiNfwVk4e4no+5t9L/RhvXoNvK920RcVUJWbTX120JthUztsOOzpPTsLgxkzmwH5fvTZFn08cs455459Bfdevuffve9Xvw96sWzbtm27r6AXbdu2bbuD/o9vhk3V/ED0X2KAICYPUmBqs6Gjv4Xe77yIIQ1yIL/XFUwfknEwO1ykf58eCf2bm30v9MXNBOwWeutXO+iNb26mbHMAuo0yK98dhp5Z6vLMppAG52RhDITRzCW2i04SXPQ783A0IxudPyl6lr4I9K5plr5p1rfQW79s2xYav2y7pljfQq+77tK3O+gsyob1ZdUbf2rXHSyLj123nENXLNbt8sAx3YI3AIlZ/7A+C81ej2+hk5jZ6xxwkVnwOn/S7j21U6IfrXsfRt/FLXSuvPdXwKfS++LD7Tt96X1xzS56W3nvFy1AN/e+aICrwvvFGliX3v/9/qAxfTtA525j6b5EvdmZu/zoV/AhD3LTNLI0TfOdklFmGbg0G4pHFwCp2/xGlsTn7kke5Pala4dCbPtZba72dO3df87N3u2mm30vsAz7kCnbJB5ZHMef15NcOMqBOIjHlgIWBXFkEyDd1J8ef8r2oNTf9Oncv732vuned+tJg/nUHEwtAxsDUQS5TcAFk6cozgj92Oi79aRpb85oDBBMwM6BNNypPz139LYR+lfRd+tJZgkAQV88SnfQt/Wn545+rIM+MbqZ2fnJ0HfrSaM3NukrDs455/JddJidje54vhf6txY+vjhEll2cEP2mnpRZRmLZMIgPp75B/yXON8WmF4W+GKq0Lw397g/kvgk9s4lzbqeelFkGo9BBZrHLszDbQXeWODKbvjT0ddNs5uBN/TLRh7UXLp2xWaeRJXG/M5twEe8Zde9scmJm0516Uj9PD0f5UGw647Mx3YLX9+2cJi4dmuW2C0fSmUviKcBFPCwh2a4qcWmeJfHFSbr3Dfp9nusPQ88nmwu/1cgn8fmFZbvneCB6GsRjS4D/hDl5OAImFsX99DkN4yB8UO19UyDaVyja82mQu389KQ3CeGwRkAVREtkFgI2DMBwDo2DY6cJR3Dc5s8jCMH0Ielt3zbJqgG5VLfuKS7OsVi3waQW0w8qYHv1TvfB1XbcnQHdhEI/7YoZFm8U0QRwFw10U72O5L/rUZsP9mIcRSejA2RtwQQqktr+u+xTPnqk5OLMM4hiIRgAW9r3dz9vTCKPNA0RmoXtg9974ypflCtqyqBb+I1D7Rb8cpiq5+ZylR7+u5r6qqvUJ0OMwhyTIh8UxQQpn5ugfkG7O8TD0/l9fJYAL+tsnDQDiaPvrc0EHCJKhh+gXjdhk+zDBMHHIgKnle4e/r6OX/W1blR0siw7KCrqi2ot+wu7dJv0ARRIAJMFQ6cgs2z3Hw9Bf9dPnuL+sCUDcbwpvJlbPCH0Ug4uCIAzC7UwA4E1o0bmDn/vGmzsQvTft/Apo/Rrm86H3flT0m8fsOOo7ZHiVDug753gg+ngzfYZREOZAHG6XYzxP9CicbZq2MwXJzsIw52fLNo3/BvR2WATzEdq5n1frx0bPb9BDgIkN3XGPnt29XuY+6HGw7STScBaOgYk5huUYzw7d2QQs3V6MzbWZJsOVyi39P7Ob+6Nfb5fP0F5f+tVjd++vYmAW50wsB8ZR/0Nm2e45PrA4M7U0y3JcMB6mz1ObMrMJ5GE4IxtNnh16mudR4GA0mrnUbqPbJM9TyyAJznFJ9G3oFBVAB221Bi4X9KsdP0dfnQr9zCbMRiHk4cjlqU37ZTWz0e1zfHAZth8VZsP02YWvGZ6O3djM4vzZoSdmwQV9k6PE8s/G9L4KQGJm0ewb0T/4uuvqErpy3tKUFTR+1TZz38C6aYqqaTqg8XXbnmLKxpvALHKAG23O7I1Z8Nqy3XM8pII2TKnvnG0f9Hqn6963Ld03nt1su7vx90bnqvR+3gDt3Hu/6IAr74tr3/RlWO/7P116769PU5HbWRzzJctXgE6B9HQPco9Xht3ewNsVMt2+W3pn/cxjlGGfEOl7QD9ahH74IVwm9O8O/bjXX+hCF7rQhS50oQtd6EIXutCFLnShC13oQhe60IX+r0b/6Y9TH/bd0b9r9eU1GYCie3zzdu93rf729sRfV/vn21+P/IovsMkA1NWjf8NuV/29D53/nvrLyH87+qm8wCYDsHz870+/Yi+68p1E6EJXhK4IXRG6InRF6IrQFaErQleErghdEboidEXoitAVoStCF7oidEXoitAVoStCV4SuCF0RuiJ0ReiK0BWhK0JXhK4IXRG60BWhK0JXhK4IXRG6InRF6IrQFaErQleErghdEboidOWu/A9UDgdwyvnRkwAAAABJRU5ErkJggg=="/></p><p class="paragraph css-1xxg5be css-15o30dr">I did this in order to better explain how the recursive descent parser works, without having to go into the details of AST. But the ideal is that we get to this:</p><p align="center"><img src="data:image/png;base64,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"/></p><p class="paragraph css-1xxg5be css-15o30dr">But then you ask me: if we have already reached the final result, which was the result, why do we still need to go through AST? Well, in fact, if that was the only goal, we could simplify things and end here. But AST has a fundamental role in the third stage, the semantic analysis stage. And with AST we can not only calculate the final result of the expression, but do many other things.</p><p align="center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAFkCAAAAADz25YVAAARz0lEQVR42u3dQW7jRroH8O8IdQPXEXiEOgJvMHWDrhuobiDegFqMF/Es6NVselHIxr2IAaKNwUsMpPMFQfDyOpPpwnvQ4L12EvzfoihZ7ra7bbdoU9L/DzTgpmSL4k+sYpElfgLm4CLcBERniM4QnSE6Q3SG6AzRGaIzRGeIzhCdITpDdIboDNEZojNEJzpDdIboDNEZojNEZ4jOEJ0hOkN0hugM0RmiM0RniM4QnSE60RmiM0RniM4QnSE6Q3SG6AzRGaIzRGeIzhCdITpDdIboDNGJzhCduc7FV3+dXL46J/qYOT+7mt5KLc8uiD5iTpZTXKv3J0QfMX/dw9UiOtEZojNEJzrRiU50ohOd6EQnOtGJTnSiE53oRCc60YlO9GfbutqM/uoSiT4t9CD5w49BzI98ma4l+m60o/rhgiT6yJfxjujTR9cYYxFpeg1hASBFLyHGHgCSD6k8mnLjI5AajX6x2qsbHzIAjX6hAJpY2eHP5cbH8slpfVCiTwq9d64qG+/IWe+kATrvpPY+AfDG1wXsyFlrHRBN5WtxAOCryliTgc44b20GXnhrvfcA1Fbemh5AEFcbok+teW8HdJsBbzab91YUmIsCOJLSW0fpgVYSAC+z0ljYGZBN2GzerQPgHJBkDvREnyp6XDGv0SsPAKYBcFRjQAcAE7D6gKx+J9gN9F4SgFPJCIZ9+m6hS0kEcOQ30Z0H4O1qUckGehoW6bCA6LuDboKqqubPoBtVVdUN9FNJwyJfEX230N31AOwGukqzgZ4kXQ/ZKgBAXis3kok+NfScUpCU+hvoKkFVgSRBczL9DfSYcy26gQ5nE/raF+NO+wwEs8g5VEA2rtdA9EmhD72vu4GOmYjMAHRWxMxv7ulBxLTYRFcvIk4BIFciJgGYGRHXA+ityIsjok+seb+1AdA8gOrNB6Ig691Px/Wj60XXjxF90uh3Jsp0VovoRGfGQtdE9INDn9JqEZ3ozBOhu+EsLdEPCL1PaTUGT5HoB9O8r9AfdVxP9Emha8wp+AQgNz5o2ZmDbxRA1wDQYWZMQe+ikxiHRUTfUfQkXqxtALXGO1kAiOLKdBhvcX2dpaC3vhLvfU/00ZPHRLdlt/U2A8FkwHogG38rOpv3J4v1Oh56Mc3SAFDpgaoaXo3oz5rZfQdMj0bXYRLMAtBKKt8T/bmjQdzY6O16+gy0raUh+nN26K231lezcdFh/HD0oL4HUDuU2Y4fojdEHxs8hcrUc0VnR27eMZeYc7RAtpUiWQ8kaTRVkoA+JeNTygCSRFUO2cZKapxxs2Ji27HRMbMiVQKglYi4DGAmYlpJ5TSsSHlqEJGW6GN04o03NqTVWC35p9i66x14PUMm37ZLZ80g+rbb9C5Y49v8mN/lVbbd7MSdcfP+WbYu0Z8h/UYnTvQDQM+tNzZ0+Tm3LtGfvBOf63NvXaI/2cAsflEnTvTdG5g5464HZjc7+MpUSvT9Qi+d+G0Ds6wZ0Eoxc0TfH/T12dXb0lgnHU7r3PmH3wiI6JPtxO0dA7PkO6hR9D3aO5oBou9gJ16b6o5OHHWwc0U2TdsqslGgS0TfbfTc3nl2NbUJw4QloI8x2A4z28SHH8kRfUc6ccQq2gZoh9s7KOAj0MU5m/edRU+fOrvaBqjNUJORy3085zbWVp9j6xJ9W534jUukN+N7IEakqnG27oGq22jsH5eT91PcCssDqrV69yXSHH3IaG2G79DL0AyE8MUv+fpsghV2r87ODwc93Hp2VRWwL1IdgBDgEuAiEGdAn778Nb+ZYv301zgc9Js7d2m6tTYz9DVyNECuOpcBtda8yGD2Db2poRkI1SwDyKGemR5QW+7BqSTfQ/Q8M5XrgdOCHANQNwC6mqh7iz4PpgOwGpb5gGQcPfe9T/elhIpbAIBacb3Sc9/R27JjR0/FsdAvRh65fPXgkaeaDACJnfhY6OdnV+OuyPLs4qG/4ipXjb+FLqY4Tj9/EvST0c9LvX/4mcWHXyh9eEb/tD/RHvIY9Ce47jDNSxsnyymu1fsToh/cWj3NVTaiE53oRCc60YlOdKITnehEJzrRiU50ohOd6EQnOtGJTnSiE30qa7VZQZvoRCc60Ym+e+g3qjUtVosWnaTy04NLNBF98uhqja+lARDF1dbmoYCTkQSorUoBJ6LvFfq6WpPKHFATgbkoECQB1gFwjuh7hl6qNcVcinggGKCqhz69lwSgLV/JIvreoKssVru8A4BWhrItSRJOh1JOug/ourpNRGpiByC1Jd3hoedrdAuU+jxHYY2eVB9euWWa6K2UbxVGqZzYjBfWWjHWuumh37Mc3+PX6sgD6H1GIxmlWlPtBvT8RXW0J4buZGjK5oCWGlXXzdy00Gf3u+HU49dqLg36aqjWlKO0pTBTX0kCgllAw14cyGUJJmNVX25WTRn9nupfsFYzI+IUpVqTmQOlWtMLSSglmtxeDNlak00HoN2A3iK6xq3G2jzy1l3fBGVdpGmjMNMX3SFlQuh1DecB4C9SL/L00XV67c/OoWdp0ZRvjbdObNw2+nYTx27eDwP9VBapW11OUF+O5KeKHsc+kDsQdC8iIgHoewDwZtLoCqJv4UVMCyCa1UllL5Nu3kH0LbzIqehw7iGJ77Wb9jh9Ouga8+6i+3IHmKMAdFbEzPK46Kd+h9FzXA/Sm0fMqpjmBZesY7+P1tu2zUCnqUlAbhsFUg+gy0BqOgDocor96kEgNToR9M19QbEn6OO/j1jbGDPgKufnUDub2w7JASqKxkbvABw55xPUhmg7wPm5bba5Vrnxixxz+alRAKlZz4m5njkTew2+HRZ1ADQGqWPshnMPefXHopbmPq1+k+gf7url1HU5HaQd0HjAJLQesApUCTiaA8BpBaQOrQOS3eJaDTNhFFDjvLUKRFttTpMp+7PUxtoaUFuFWiKgvhbnfQv0zlXlCqtaW56fxDtvP93mHzx6aScb56wHYoBLSMY5ZxbAUQKA7G1IQLDOOdniWvkyE0YBW6MMWoYLK4uNmTOA2CI4qzIQJd9s3tuC7lbPTzIDsvFE/xx6W2W0HshWLdAbVdW8Qge0tQ2Cf/g17E+uVeUBJNFhhmsrq2tNEpHLzBnpMUyiGVZEG9Hb0LO0w+Lyxz49l+pg0YeWuqA3NVB7AHXVArAN0K7RmxpoHJJR5G326RIH9HY9E2aNrsOiBYA1cDTGmtvRh5nREon+yaOoytpuhZ6tsa4CkEwGoLaydd5o3iurwMw6O9/iWpmwRl/NhNlAb3Vobtbo0aaV8UfovXQojQLRPz3uyXf9B8j5thHkdgeSzg3oum7A1+gonXLGBrqrATRDa/5h827i+tQW0Sd8Ri5J1GRFgb+sZsJco88l5hztJnowaXg+YKpeFcgpBelSAuZmgWRrEH3a6JiJmFoUw0yYzeYdmFmRKm2iqxOx89KOJytSAan0/Lb8MXGZ6FNHR9Z8OkxkvmUmzMdDhc0TlR8/ev/JNER/trXqa0W2dnqfRaKPt1bqxJpHl3El+o42733XT3G1iL6Ha0V0ohOd6EQnOtGJTnSiE53oRCc60YlO9L1HP3k/9ttYnhB9Yuivz0auOXp1dj7JrTv+p/3p95B7Twj+Zuz66a+nuUuN/ml/hj1EwDzvp/0Z9hCiH2CITnSG6AzRGaIzRH+K1CFloh0Yepo7cTE95UteTHGcfn5I6ACQQmXqRf9Er3Z+djW9TbA8uzi8Pl07b63v9Ale6mQ5xQ3w/uTw0AGgb2tThdFb+kO+yjbRlj46cU1P9AMbsuUuVKZeKNEPbJyurbfWd5no+42ePxTu5864Ebp4ok+GHCHcOphzZttdPNGnktYan+7o4n1l/Ra7eKJPpxeXeT2/u4uvbbWtLp7o09nVy114om/vuK1zv63ztUSfTHwpCuRsqO++hWoKlam/tIsn+mRSbrCby32demOr7q5RvLdf1sUTfTIxCSh39AbQd1Cbcdc+reV8bSb6rvfp1iWsxm0pLtT0CE256/utLf3ciWvSzWEf0Xfu+D0DpVFvbTd3BmgC4F8AOd3amud043xtckTfyZT23Idyb+9Tj9YCC+ttvHMwd31J1i2eCT09ok4P0T+ktz6YFlCnlUJFkU0Gujs27eqSbLlFONF3taXvkktAtlULtKYKySXAOWPu2uNTdOJsJPrux8wAxKCtt4osLfoeaOLtx3Y5SD3y1r2u1pSCX6wWLUo12nVNJ6J/eRe/OkAbhnOxar271bxUsR9x66o1vpYGQJTNAk5GEqC28tb0RN9Ogo2uL4d3KKO6qkeO/uZxWzUbfci2rtakMgfURGBeqjslwDp87pbuRH9YF4/VOTto7RQZ1Yvk3RNv3VKtKWYEAwDBAFU99On9UN0pE32bKR12k9DahFZ6wOiTbt3ryjzl49YKcLQq03K6ru5E9K2nrRQ+wDtnapOfdOteV+bxFgAaKbWHB/RVdSeibz+zqrIK3wApPPHWPfIAep/RSAZQu/IPSRKyxC97X0T/dDMLIFlF/9Rbdy4N+soC2Vaah3KcUftKEhBW1Z2IPlq6yrr81Ft3ZkoBJ2glUkaIMxHzQhKG6k4csk0zX7R119WX1kWa8nVBJs3PtVpEH3PrTnS1iE50hugM0YlOdKIDGM6tro7I4weH5OvTcmnzrGvb3XyWt0TfXfROujvQc0pxjX7k7kaPPdF3Cx2KO9ABtGv0D79zu4kuC6LvArqGsACAGOMwGyY3fqFRAVmkELob6F2MsR3afB+07QBvc+MXGdAYpY53TPYh+oTQa+udNACcc2X+m1rjnZUEiDO+GnbeAT06Z4av4omrrfGAN5WvxQHqvTjvW6LfyHJ66DYD3pTWvaD79QwZqbGeIXPdvJcFKjNAjR+eP0yYZPP+cX66/J8p9ukD6IC+niFTCKO9Fb383/mhTx9mXRD9luTLn6+mjr6eIfNJ9Cgg+n3z9ttf/5g4ergPekP0B+Tq58s8aXTn7oNeOvGP0Bui38F+eXk1PfSUWmlSKjNkkr2BnlMK0qUEaEpVlZIC1vYa5AP0qurvMXfuMIdsT9W1PwR9mOKKMkOmvoGeymMW8OWnCKgVcdUH6L0VsUS/q2v/x6+TQL/9M6k5Sf/Zp6nChlsWEv1Zu/ZHbd3eK3L12f217oDmw7P1o34Wdx8dWF5+fzVFdHVijf3sDjsTY2QGok+ta3/k1u27/j5rnx57t7vDPvd+9Z+X/5og+kQPNfYEfeyunegH2MYTfbL57fKXK6IfGPp4bTzRJ82ul/8m+oGhj9S1E33qGeGiK9EPsGsn+i6wb/miK9EPsGsn+m7kj7ffbu+i68n7Kb7F5QnRR+zaX59NsMLu1dk50W/ZFS51S238N1Osn/4aRH+yUft+ZI+/1jT2RVeiH8ionehs44k+zYx30ZXobOOJPi327y//j9IHhs6u/SDRv+TrMO9+/GFy+fE3oo/Ztf/2zz+n92Z+/+c7ot8r//uoi64//j7F9/Lnj0R/WNd+9dMDfueHab6VH4h+7zb+7eWvwB/f/kH0g2L/+TJD/030w8p/X/708y9EP7T89o/viX5Y7fsv+h8PqZ5C9H0YuL1dPt3WJfpuhuhEJzrRiU50ohOd6AeP/l8XRD849Itjoh8I+tW3ry6WAN5cvDy+uLhYlkXnS6LvL/ry9OWr09N3wLev/n786tWrd8Dy9OTV18ffEX1v0U+/BvDy5Wbzfna6BM7/9p7oe4r+9vgtgDfH7zfQTy4AvL8g+r6ivzkuWV6jvz9+wwO5PUd/u1wul0sQ/XDQl8cXHw3ZTr8GsHy1JPq+Hsid/+0NlucvS//+3XK5BL47/g7v/n7KPX1/x+nnx8fHL5frH98AuDhdLyL6XqIDy/Vs+6vVj8urZ10too+OPr3VIjrRGaIzRCc60YlOdKITnehEJzrRiU50ohN9Qvnxzymu1e+858yYeffrBO809Oev/yL6mPltiveRyyA6Q3SG6AzRGaITnSE6Q3SG6AzRGaIzRGeIzhCdITpDdIboDNEZojNEZ4jOEJ3oDNEZojNEZ4jOEJ0hOkN0hugM0RmiM0RniM4QnSE6Q3SG6ERniM4QnSE6Q3Rmt/L/IeBY4y7dX4UAAAAASUVORK5CYII="/></p><p class="paragraph css-1xxg5be css-15o30dr">But after all, what is AST? Okay, I know it&#x27;s an abstract syntax tree, but, what does that mean? We know that a tree is a data structure, usually chained and represented by several nodes.
Roughly speaking, we will take an expression and transform it into an object that represents this expression, as in this example:</p><p class="paragraph css-1xxg5be css-15o30dr">From:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#905">1</span><span> </span><span class="token" style="color:#9a6e3a;background:none">+</span><span> </span><span class="token" style="color:#905">2</span><span> </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> </span><span class="token" style="color:#905">3</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">To:</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-json" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;BinaryOpNode&quot;</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#905">&quot;token&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#905">&quot;left&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;LiteralNode&quot;</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#905">&quot;token&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#905">&quot;value&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#905">1</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#905">&quot;right&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;BinaryOpNode&quot;</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#905">&quot;token&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Star&quot;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#905">&quot;left&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;LiteralNode&quot;</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#905">&quot;token&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>        </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>        </span><span class="token" style="color:#905">&quot;value&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#905">2</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#905">&quot;right&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;LiteralNode&quot;</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#905">&quot;token&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>        </span><span class="token" style="color:#905">&quot;type&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>        </span><span class="token" style="color:#905">&quot;value&quot;</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#905">3</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span></span></div></code></pre></pre><p align="center"><img src="data:image/png;base64,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"/></p><h4 class="css-7xg5r8 css-15o30dr" id="nodes"><a class="heading-anchor css-1g84dnl" href="#nodes">#</a>Nodes</h4><p class="paragraph css-1xxg5be css-15o30dr">Within the AST, each node represents a syntactic construction within the program. It can represent a literal, raw value, such as number, float, string, boolean, etc. It can represent an expression (with its factors and operator), a variable declaration (with the identifier and its assignment), among others. In our interpreter, we will have only three nodes, and they are:</p><p class="paragraph css-1xxg5be css-15o30dr">The <code class="css-159wm0q css-15o30dr">LiteralNode</code> that will represent the literal nodes, in our case the number.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-ts" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">interface</span><span> </span><span class="token token maybe-class-name" style="color:#DD4A68">LiteralNode</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;LiteralNode&quot;</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token maybe-class-name">Token</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">The <code class="css-159wm0q css-15o30dr">BinaryOpNode</code> representing binary operators, that is, operators that have two factors (addition, subtraction, multiplication and division).</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-ts" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">interface</span><span> </span><span class="token token maybe-class-name" style="color:#DD4A68">BinaryOpNode</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;BinaryOpNode&quot;</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  left</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token maybe-class-name">Node</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  right</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token maybe-class-name">Node</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token maybe-class-name">Token</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">The last node, <code class="css-159wm0q css-15o30dr">UnaryOpNode</code>, representing our unary operators, in our case the negative value.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-ts" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">interface</span><span> </span><span class="token token maybe-class-name" style="color:#DD4A68">UnaryOpNode</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;UnaryOpNode&quot;</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  expr</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token maybe-class-name">Node</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token maybe-class-name">Token</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">Finally, we will create three functions that create our three nodes. They are simple functions that receive the data and return the object that represents the node.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> nodes </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token function-variable token maybe-class-name" style="color:#DD4A68">LiteralNode</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter token" style="color:#999">{</span><span class="token parameter"> token </span><span class="token parameter token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> 
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;LiteralNode&quot;</span><span class="token" style="color:#999">,</span><span> token </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token function-variable token maybe-class-name" style="color:#DD4A68">BinaryOpNode</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter token" style="color:#999">{</span><span class="token parameter"> token</span><span class="token parameter token" style="color:#999">,</span><span class="token parameter"> left</span><span class="token parameter token" style="color:#999">,</span><span class="token parameter"> right </span><span class="token parameter token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> 
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;BinaryOpNode&quot;</span><span class="token" style="color:#999">,</span><span> left</span><span class="token" style="color:#999">,</span><span> right</span><span class="token" style="color:#999">,</span><span> token </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token function-variable token maybe-class-name" style="color:#DD4A68">UnaryOpNode</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token parameter token" style="color:#999">{</span><span class="token parameter"> token</span><span class="token parameter token" style="color:#999">,</span><span class="token parameter"> expr </span><span class="token parameter token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> 
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> type</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#690">&quot;UnaryOpNode&quot;</span><span class="token" style="color:#999">,</span><span> expr</span><span class="token" style="color:#999">,</span><span> token </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><h4 class="css-7xg5r8 css-15o30dr" id="back-to-the-parser"><a class="heading-anchor css-1g84dnl" href="#back-to-the-parser">#</a>Back to the parser</h4><p class="paragraph css-1xxg5be css-15o30dr">Now that we have our nodes defined, we need to rewrite our parser so that it manages AST instead of interpreting the final result.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">add</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> node </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:none">||</span><span> </span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Minus&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    node </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> nodes</span><span class="token" style="color:#999">.</span><span class="token method property-access token maybe-class-name" style="color:#DD4A68">BinaryOpNode</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span> left</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> node</span><span class="token" style="color:#999">,</span><span> right</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">mul</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> node</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">mul</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">let</span><span> node </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">una</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">while</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Star&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:none">||</span><span> </span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Slash&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    node </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> nodes</span><span class="token" style="color:#999">.</span><span class="token method property-access token maybe-class-name" style="color:#DD4A68">BinaryOpNode</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span> left</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> node</span><span class="token" style="color:#999">,</span><span> right</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">una</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> node</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">una</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Minus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:none">||</span><span> </span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">return</span><span> nodes</span><span class="token" style="color:#999">.</span><span class="token method property-access token maybe-class-name" style="color:#DD4A68">UnaryOpNode</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span> expr</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">una</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">prim</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">prim</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Number&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">return</span><span> nodes</span><span class="token" style="color:#999">.</span><span class="token method property-access token maybe-class-name" style="color:#DD4A68">LiteralNode</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> token</span><span class="token" style="color:#9a6e3a;background:none">:</span><span> </span><span class="token" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;LeftParen&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">const</span><span> result </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">expr</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">match</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;RightParen&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">SyntaxError: Expecting closing paren</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">throw</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Error</span><span class="token" style="color:#999">(</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token template-string token" style="color:#690">SyntaxError: Unexpected </span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">${</span><span class="token template-string token interpolation token" style="color:#DD4A68">peek</span><span class="token template-string token interpolation token" style="color:#999">(</span><span class="token template-string token interpolation token" style="color:#999">)</span><span class="token template-string token interpolation token" style="color:#999">.</span><span class="token template-string token interpolation token property-access">type</span><span class="token template-string token interpolation token interpolation-punctuation" style="color:#999">}</span><span class="token template-string token" style="color:#690"> token</span><span class="token template-string token template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><h4 class="css-7xg5r8 css-15o30dr" id="interpreting-the-ast"><a class="heading-anchor css-1g84dnl" href="#interpreting-the-ast">#</a>Interpreting the AST</h4><p class="paragraph css-1xxg5be css-15o30dr">There are several ways that a language can do to obtain the final result of a source code. In general, it is often a complex part because it has to deal with contexts, scopes, globals, expressions, among others. Our interpreter only deals with expressions, so to execute our program we will just calculate our expression, and produce a final value.</p><p class="paragraph css-1xxg5be css-15o30dr">Previously we had already reached the final value of our expression by calculating directly in the parser. We took a step back to rewrite it and produce an AST. Just like when we did it inside the parser, where we go through all the lexemes, identify nodes and calculate their value based on each type, we will now have to go through the AST and perform the same necessary logic for each node.</p><p class="paragraph css-1xxg5be css-15o30dr">We will build a function that will visit each node, much like what a <a href="https://en.wikipedia.org/wiki/Visitor_pattern" class="css-xanzd0">visitor pattern</a> does, but much more simplistic and less flexible, for now.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">interpreter</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token parameter">ast</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// defines the visitors of each node</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> visitors </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token token maybe-class-name" style="color:#DD4A68">LiteralNode</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:slategray">/* ... */</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token token maybe-class-name" style="color:#DD4A68">BinaryOpNode</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:slategray">/* ... */</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token token maybe-class-name" style="color:#DD4A68">UnaryOpNode</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:slategray">/* ... */</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// execute the visitor corresponding to the node</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">visit</span><span> </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token parameter">node</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:none">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>visitors</span><span class="token" style="color:#999">[</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> visitors</span><span class="token" style="color:#999">[</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">,</span><span> visit</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// execute the visitor of the first ast node</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">visit</span><span class="token" style="color:#999">(</span><span>ast</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">When we call our function <code class="css-159wm0q css-15o30dr">interpreter()</code>, it will go through all the nodes calling the visitor responsible for calculating its own result. For example, the visitor of <code class="css-159wm0q css-15o30dr">BinaryOpNode</code> will be responsible for adding the <code class="css-159wm0q css-15o30dr">left</code> and the <code class="css-159wm0q css-15o30dr">right</code> if his operator is of the <code class="css-159wm0q css-15o30dr">Plus</code> token. Or multiply the <code class="css-159wm0q css-15o30dr">left</code> and <code class="css-159wm0q css-15o30dr">right</code> if your operator is a <code class="css-159wm0q css-15o30dr">Star</code> token. The same idea for the other operators.</p><p class="paragraph css-1xxg5be css-15o30dr">Each visitor receives the <code class="css-159wm0q css-15o30dr">node</code> as the first argument, and the visit function as the second argument, so that he can visit and get the result of his child nodes.</p><p class="paragraph css-1xxg5be css-15o30dr">We start with <code class="css-159wm0q css-15o30dr">LiteralNode</code>, which is the simplest of nodes, since it represents a terminal node. It has no other nodes inside it, so to calculate its value we just return the value of your token.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> visitors </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token token maybe-class-name" style="color:#DD4A68">LiteralNode</span><span class="token" style="color:#999">(</span><span class="token parameter">node</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">return</span><span> node</span><span class="token" style="color:#999">.</span><span class="token property-access">token</span><span class="token" style="color:#999">.</span><span class="token property-access">value</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">We now create the visitor for <code class="css-159wm0q css-15o30dr">BinaryOpNode</code>. Although it seems complex, the idea is also simple. We will apply the logic to the <code class="css-159wm0q css-15o30dr">left</code> and <code class="css-159wm0q css-15o30dr">right</code> based on the operator. That is, for the sum operator, we will add the left and the right. But remember that <code class="css-159wm0q css-15o30dr">right</code> and <code class="css-159wm0q css-15o30dr">left</code> are also nodes, so we need to interpret them first.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> visitors </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// ...</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token token maybe-class-name" style="color:#DD4A68">BinaryOpNode</span><span class="token" style="color:#999">(</span><span class="token parameter">node</span><span class="token parameter token" style="color:#999">,</span><span class="token parameter"> visit</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">const</span><span> leftVal </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">visit</span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">left</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">const</span><span> rightVal </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">visit</span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">right</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">token</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> leftVal </span><span class="token" style="color:#9a6e3a;background:none">+</span><span> rightVal</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">token</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Minus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> leftVal </span><span class="token" style="color:#9a6e3a;background:none">-</span><span> rightVal</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">token</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Star&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> leftVal </span><span class="token" style="color:#9a6e3a;background:none">*</span><span> rightVal</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">token</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Slash&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> leftVal </span><span class="token" style="color:#9a6e3a;background:none">/</span><span> rightVal</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">For our last node, <code class="css-159wm0q css-15o30dr">UnaryOpNode</code>, the idea is not much different.</p><pre><pre style="color:black;background:#F3F8FB;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em 0;margin:.5em 0;overflow:auto;border-radius:4px"><code class="language-js" style="color:black;background:none;text-shadow:none;font-family:Fira Code, Consolata, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><div style="padding:0 1em"><span><span class="token" style="color:#07a">const</span><span> visitors </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:slategray">// ...</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token token maybe-class-name" style="color:#DD4A68">UnaryOpNode</span><span class="token" style="color:#999">(</span><span class="token parameter">node</span><span class="token parameter token" style="color:#999">,</span><span class="token parameter"> visit</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">const</span><span> exprVal </span><span class="token" style="color:#9a6e3a;background:none">=</span><span> </span><span class="token" style="color:#DD4A68">visit</span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">expr</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">token</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Plus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:none">+</span><span>exprVal</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span>
</span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>node</span><span class="token" style="color:#999">.</span><span class="token property-access">token</span><span class="token" style="color:#999">.</span><span class="token property-access">type</span><span> </span><span class="token" style="color:#9a6e3a;background:none">===</span><span> </span><span class="token" style="color:#690">&quot;Minus&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span></span></div><div style="padding:0 1em"><span><span>      </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:none">-</span><span>exprVal</span><span class="token" style="color:#999">;</span><span>
</span></span></div><div style="padding:0 1em"><span><span>    </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span>  </span><span class="token" style="color:#999">}</span><span>
</span></span></div><div style="padding:0 1em"><span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></span></div></code></pre></pre><p class="paragraph css-1xxg5be css-15o30dr">Done! We have an interpreter that uses AST as a base.<br/>
<!-- -->If we call <code class="css-159wm0q css-15o30dr">interpreter(parser(lexer(&quot;7 - 2 * 3&quot;))</code> we get the value 1.</p><blockquote class="blockquote css-1188xl0 css-15o30dr"><p class="paragraph css-1xxg5be css-15o30dr">You can check the final parser we built in <a href="https://repl.it/@renatorib/parser-v5" class="css-xanzd0">this link</a></p></blockquote></div></div><div class="css-12bljn2 css-15o30dr"><p class="paragraph css-1xxg5be css-15o30dr">Don’t forget to follow me on<!-- --> <a href="https://twitter.com/renatorib_" target="_blank" class="css-xanzd0">twitter</a> <!-- -->and<!-- --> <a href="https://github.com/renatorib" target="_blank" class="css-xanzd0">github</a>.</p></div><style data-emotion-css="1nqq7k3">.css-1nqq7k3{background:rgba(0,0,0,0.05);color:#888;padding:30px 0;margin-top:30px;font-size:20px;}</style><div class="css-1nqq7k3 css-15o30dr"><div class="css-12bljn2 css-15o30dr">© 2019-present Renato Ribeiro. All Rights Reserved.</div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"demystifying-interpreters"}},"page":"/blog/[slug]","query":{"slug":"demystifying-interpreters"},"buildId":"OeqasO-NN7pRe_cSmuzX-","nextExport":true,"isFallback":false,"gip":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-555defa4e62ba07d4446.js"></script><script src="/_next/static/chunks/main-e47d938af6cc03fe7b7b.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.9ec1f7868b3e9d138cdd.js" async=""></script><script src="/_next/static/chunks/05d954cf.9e3ba82d748380f7bd2c.js" async=""></script><script src="/_next/static/chunks/commons.1c635899381e3f4b2832.js" async=""></script><script src="/_next/static/chunks/c4b7dd1ea37cbe53e921af5fa95eb74e6ed8adf6.521f5e484ffbbd6cd108.js" async=""></script><script src="/_next/static/chunks/11cd88066fea60e4e9b66126e194a6cda56fa586.f24b4e8999210d024a49.js" async=""></script><script src="/_next/static/chunks/pages/_app-e5cc290103d5c6ddc580.js" async=""></script><script src="/_next/static/chunks/d09f71c2771447e62661a7b2e7969c57ce47c1dd.51122af25badafa19040.js" async=""></script><script src="/_next/static/chunks/bfa37fcd0818edd0d3354ea585e5d4d4b3e87fa4.d6dd330130be845ce596.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-209fa607536f80ba4dd1.js" async=""></script><script src="/_next/static/OeqasO-NN7pRe_cSmuzX-/_buildManifest.js" async=""></script><script src="/_next/static/OeqasO-NN7pRe_cSmuzX-/_ssgManifest.js" async=""></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-68492464-1"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-68492464-1');
          </script></body></html>